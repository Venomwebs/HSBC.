(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{0:function(e,t,n){e.exports=n("tjUo")},"3atR":function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"c",function(){return r}),n.d(t,"b",function(){return o});var a=Object.freeze({LEAD:"LEAD",USER:"USER",END_USER:"END_USER"}),r=Object.freeze({AGENT:"AGENT",END_USER:"END_USER"}),o=Object.freeze({CHAT:"CHAT",EMAIL_CAPTURE:"EMAIL_CAPTURE_CARD",CONDITIONAL_SKILL_EVAL:"BOT_NODE_CONDITION_EVALUATION",ANNOUNCEMENT:"ANNOUNCEMENT"})},"417H":function(e,t,n){"use strict";n.d(t,"g",function(){return I}),n.d(t,"h",function(){return O}),n.d(t,"b",function(){return A}),n.d(t,"d",function(){return g}),n.d(t,"f",function(){return _}),n.d(t,"a",function(){return b}),n.d(t,"c",function(){return S}),n.d(t,"e",function(){return m}),n.d(t,"i",function(){return C});var a=n("+vh4"),r=n("8lq6"),o=n("oQJ1"),i=n("dMPp"),c=n("RhEL"),s=n("yzXs"),u=n("CDfd"),d=n("YsSj"),E=n("hm8b"),f=n("LVcX"),l=n("Ry6R"),p=n("A5mO"),v=n("3atR"),I=Object(r.a)([Object(o.a)(Object(i.a)("createdAt"))]),O=function shouldReceiveMessage(e){var t=e.contentType===v.b.CHAT&&(!!e.body.length||!!e.attributes.appointmentInfo||!!e.attributes.startInteraction),n=e.contentType===v.b.EMAIL_CAPTURE,a=e.attachments&&e.attachments.length>0;return t||n||a},A=Object(s.a)(Object(u.a)(function shouldGroupMessages(e,t){return _(e)&&_(t)||Object(c.a)(e.authorType,t.authorType)&&Object(c.a)(e.authorId,t.authorId)&&Object(p.a)(t.attributes.generatedAt||t.createdAt).isBefore(Object(p.a)(e.attributes.generatedAt||e.createdAt).add(2,"hours"))}),I,Object(d.a)(O)),g=function isEmptyMessage(e){return!e||!e.replace(/<\/?p[^>]*>/g,"").trim()},_=function isMeetingScheduleMessage(e){var t=e.attributes,n=t.offerSchedule,a=t.presentSchedule,r=t.scheduleMeetingFlow,o=t.appointmentInfo;return!Object(E.a)(n)||!Object(E.a)(a)||!Object(E.a)(r)||!Object(E.a)(o)},b=function getMessageAttribute(e,t){return Object(f.a)(null,["attributes",t],e)},S=function hasMessageAttribute(e,t){return!!b(e,t)},m=function isEndUserMessage(e){return!!e&&(e.authorType===v.a.LEAD||e.authorType===v.a.END_USER)},C=function truncateMessagePreview(e,t){var n=Object(f.a)("",["attributes","preview"],e);if(n.length>t){var r=Object(l.a)(100,n)[0].trim();return Object(a.a)({},e,{attributes:Object(a.a)({},e.attributes,{preview:"".concat(r,"...")})})}return e}},"5Fu3":function(e,t,n){"use strict";var a=n("9OUN"),r=n("XQCc"),o=n("VqYn"),i=n("8SHQ"),c=n("Obtf"),s=n("dn/m"),u={RECEIVE_ACTIVE_CAMPAIGN:function receiveActiveCampaignHandler(e){var t=e.action;e.draft.activeCampaign=t.payload.data},CLEAR_ACTIVE_CAMPAIGN:function clearActiveCampaignHandler(e){e.action;e.draft.activeCampaign=null},RECEIVE_CAMPAIGN_EVAL_ID:function receiveCampaignEvalIdHandler(e){var t=e.action;e.draft.campaignEvalId=t.payload.campaignEvalId},RECEIVE_UNREAD_CAMPAIGNS:function receiveUnreadCampaignsHandler(e){var t=e.action;e.draft.unreadCampaigns=t.payload},RECEIVE_INELIGIBLE_CAMPAIGNS:function receiveIneligibleCampaignsHandler(e){var t=e.action;e.draft.ineligibleCampaignIds=t.payload}},d=Object(s.b)({activeCampaign:null,campaignEvalId:null,ineligibleCampaignIds:[],unreadCampaigns:[]},u),E=n("mj2O"),f=n.n(E),l=n("+vh4"),p=n("7SM1"),v=n("LVcX"),I=n("aO/P"),O=n("LeE/"),A=n("z5yO"),g=n("U3QC"),_=n("icD7"),b=n("bMBU"),S=n("YXQ5"),m=n("7Qib"),C=n("i9gz"),T=n("Jstd"),R=n("P6UB"),h=["drift.click","drift.me","drift.com","driftqa.com","driftqa.me","driftqa.click"];var j=n("HYPW"),N=n("jm9a"),y=n("O0zU"),M=n("U505"),P=n("JCzi"),D={TOGGLE_CHAT:function toggleChatHandler(e){var t=e.action;e.draft.chatOpen=t.payload.chatOpen},SEND_MESSAGE:function sendMessageHandler(e){var t=e.action,n=e.draft,a=t.payload.message.conversationId||"NEW";n.activeConversation=a,n.chatOpen=!0,n.messages[a]=Object(l.a)({},n.messages[a]||{},Object(N.a)({},t.payload.message.attributes.widgetGuid,t.payload.message)),n.conversations[a]||(n.conversations[a]={conversation:{id:a}}),n.conversations[a].lastMessage=t.payload.message},RECEIVE_MESSAGE_SENT:function receiveMessageSentHandler(e){var t=e.action,n=e.draft,a=t.payload,r=a.message,o=a.isNew;void 0!==o&&o&&(n.messages[r.conversationId]=Object(l.a)({},n.messages.NEW,Object(N.a)({},r.attributes.widgetGuid,r)),n.conversations[r.conversationId]=Object(l.a)({},n.conversations.NEW),delete n.conversations.NEW,delete n.messages.NEW),n.endUserEngaged=!0,n.messages[r.conversationId]=Object(l.a)({},n.messages[r.conversationId],Object(N.a)({},r.attributes.widgetGuid,r)),n.activeConversation=r.conversationId,n.conversations[r.conversationId]||(n.conversations[r.conversationId]={conversation:{id:r.conversationId}}),n.conversations[r.conversationId].lastMessage=r},RECEIVE_AGENT_MESSAGE:function receiveAgentMessageHandler(e){var t=e.action,n=e.draft,a=t.payload.message;n.messages[a.conversationId]=Object(l.a)({},n.messages[a.conversationId],Object(N.a)({},a.id,a)),n.activeConversation!==a.conversationId&&(n.activeConversation=a.conversationId),n.conversations[a.conversationId]&&(n.conversations[a.conversationId].lastMessage=a)},RECEIVE_CONVERSATION:function receiveConversationHandler(e){var t=e.action,n=e.draft,a=t.payload.conversation;n.conversations[a.conversation.id]=a},RECEIVE_INITIAL_ACTIVE_CONVERSATION:function receiveInitialActiveConversationHandler(e){var t=e.action,n=e.draft;n.activeConversation=t.payload.conversation.conversation.id,n.conversations[t.payload.conversation.conversation.id]=t.payload.conversation},RECEIVE_MESSAGES_FOR_CONVERSATION:function receiveMessagesForConversationHandler(e){var t=e.action,n=e.draft,a=t.payload,r=a.messages,o=a.conversationId,i=a.hasMoreMessages,c=void 0!==i&&i,s=a.nextPageMessageId,u=void 0===s?null:s;n.messages[o]=Object(l.a)({},n.messages[o],Object(P.b)(r)),n.conversations[o]=Object(l.a)({},n.conversations[o],{hasMoreMessages:c,nextPageMessageId:u});var d=r.filter(function unreadAgentMessages(e){return"Read"!==e.viewerRecipientStatus&&"USER"===e.authorType&&!!e.body&&!!e.body.length}).map(function(e){return e.id});n.unreadAgentMessages[o]=d},RECEIVE_BULK_CONVERSATIONS:function receiveBulkConversationsHandler(e){var t=e.action,n=e.draft,a=t.payload.conversations;n.conversations=Object(y.a)(n.conversations,Object(P.a)(a))},SET_ACTIVE_CONVERSATION:function setActiveConversationHandler(e){var t=e.action;e.draft.activeConversation=t.payload.conversationId},CLEAR_ACTIVE_CONVERSATION:function clearActiveConversationHandler(e){e.action;e.draft.activeConversation=null},RECEIVE_READ_MESSAGES:function sendReadReceiptHandler(e){var t=e.action,n=e.draft,a=t.payload.conversationId;n.unreadAgentMessages[a]=[]},RECEIVE_READ_MESSAGE:function sendSingleReadReceiptHandler(e){var t=e.action,n=e.draft,a=t.payload,r=a.conversationId,o=a.messageId;n.unreadAgentMessages[r]=Object(M.a)([o],n.unreadAgentMessages[r]||[])},SET_UNREAD_MESSAGE:function setUnreadMessageHandler(e){var t=e.action,n=e.draft,a=t.payload.message;n.unreadAgentMessages[a.conversationId]?n.unreadAgentMessages[a.conversationId].push(a.id):n.unreadAgentMessages[a.conversationId]=[a.id]},RECEIVE_ATTACHMENTS:function receiveAttachments(e){var t=e.action,n=e.draft;n.attachments=Object(l.a)({},n.attachments,Object(m.a)(t.payload.attachments))},RECEIVE_IS_TYPING:function setIsTypingHandler(e){var t=e.action;e.draft.typingIndicators[t.payload.conversationId]=t.payload},SET_ACTIVE_DRIFTLINK:function setActiveDriftlinkHandler(e){var t=e.action;e.draft.activeDriftlink=t.payload},RECEIVED_MATCHED_CONVO_ROUTING_RULES:function receiveMatchedConversationRoutingRulesHandler(e){var t=e.action;e.draft.matchedRoutingRules=t.payload}},w=Object(s.b)({chatOpen:!1,endUserEngaged:!1,activeConversation:null,activeDriftlink:null,attachments:{},conversations:{},typingIndicators:{},agentMessagesFromCurrentSession:{},messages:{},unreadAgentMessages:{},matchedRoutingRules:[]},D),L=n("FgEv"),V={configuration:{gates:[],dataProtection:{},theme:{awayMessage:null,welcomeMessage:null,team:[],userList:[],userListMode:void 0}}},U={RECEIVE_EMBED_CONFIGURATION:function receiveEmbedConfigurationHandler(e){var t=e.action,n=e.draft;return Object(l.a)({},t.payload,{configuration:Object(l.a)({},n.configuration,t.payload.configuration)})},RECIEVE_EMBED_AWAY_MESSAGE:function receiveEmbedAwayMessageHandler(e){var t=e.action,n=e.draft,a=t.payload.message;void 0!==a&&a&&(n.configuration.theme.awayMessage=t.payload.message)},RECEIVE_EMBED_WELCOME_MESSAGE:function receiveEmbedWelcomeMessageHandler(e){var t=e.action,n=e.draft,a=t.payload,r=a.message,o=a.authorId;n.configuration.theme.welcomeMessage=r,o&&(n.configuration.autoAssigneeId=o)},RECEIVE_EMBED_CONFIGURATION_OVERRIDE:function receiveEmbedConfigurationOverrideHandler(e){var t=e.action,n=e.draft;n.configuration=Object(L.a)(n.configuration,t.payload)}},H=Object(s.b)(V,U),B=n("WwEg"),G={RECEIVE_DRIFT_INTEL:function receiveDriftIntelHandler(e){var t=e.action,n=e.draft,a=t.payload,r=a.account,o=void 0===r?{}:r,i=a.conditions,c=void 0===i?{}:i,s=a.segments,u=void 0===s?[]:s;n.intelConditions=Object(y.a)(n.intelConditions,c),n.account=o,n.accountSegments=[].concat(Object(B.a)(n.accountSegments),Object(B.a)(u))},RECEIVE_SEGMENT_MEMBERSHIPS:function receiveSegmentMembershipsHandler(e){var t=e.action,n=e.draft;n.contactSegments=[].concat(Object(B.a)(n.contactSegments),Object(B.a)(t.payload))}},x=Object(s.b)({account:{},accountSegments:[],intelConditions:{},contactSegments:[]},G),k={RECEIVE_IDENTITY_MAP:function receiveIdentityMapHandler(e){var t=e.action;e.draft;return t.payload}},W=Object(s.b)({},k),F=n("TbSn"),Y=n("417H"),q={RECEIVE_ACTIVE_CAMPAIGN:function receiveNewBotCampaignMessageHandler(e){var t=e.action,n=e.draft,a=Object(v.a)({},["data"],t.payload);Object(Y.c)(a,"startInteraction")&&!n.active.includes(a.id)&&(n.active=[].concat(Object(B.a)(n.active),[a.id]))},RECEIVE_INITIAL_ACTIVE_CONVERSATION:function receiveInitialActiveConversationHandler(e){var t=e.action,n=e.draft,a=Object(v.a)(null,["payload","conversation","conversation","id"],t);a&&(n.initialConversationId=a)},RECEIVE_MESSAGES_FOR_CONVERSATION:function receiveMessagesForConversationHandler(e){var t=e.action,n=e.draft,a=t.payload.messages,r=Object(F.a)(t.payload.messages),o=Object(Y.c)(r,"startInteraction"),i=Object(T.a)(function(e){return"Read"===e.viewerRecipientStatus},a);o&&i&&r.conversationId===n.initialConversationId&&(n.passive=[].concat(Object(B.a)(n.passive),[r.id]))},REMOVE_TRIGGERABLE_CAMPAIGN_IMPRESSION:function removeTriggerableCampaignImpressionHandler(e){var t=e.action,n=e.draft,a=t.payload,r=a.source,o=a.messageId;"active"===r?n.active=Object(M.a)([o],n.active):"passive"===r&&(n.passive=Object(M.a)([o],n.passive))}},z=Object(s.b)({initialConversationId:null,active:[],passive:[]},q),K={IDENTIFY_LEAD:function identifyLeadHandler(e){var t=e.action;e.draft.endUser.email=t.payload},RECEIVE_GEO:function receiveGeoHandler(e){var t=e.action;e.draft.geo=t.payload},RECEIVE_ACCESS_TOKEN:function receiveAccessTokenHandler(e){var t=e.action;e.draft.auth.accessToken=t.payload.accessToken},RECEIVE_SOCKET_AUTH:function receiveSocketAuthHandler(e){var t=e.action;e.draft.auth.socket=t.payload},RECEIVE_SOCKET:function receiveSocketHandler(e){var t=e.action,n=e.draft,a=Object(v.a)(null,["payload","cluster"],t);a&&(n.sockets[a]={channels:{}})},RECEIVE_CHANNEL:function receiveChannelHandler(e){var t=e.action,n=e.draft,a=Object(v.a)(null,["payload","cluster"],t);a&&(n.sockets[a].channels[t.payload.key]=t.payload.channel)},RECEIVE_END_USER:function receiveEndUserHandler(e){var t=e.action,n=e.draft,a=!!t.payload.assignedAgentId;n.endUser=Object(l.a)({},n.endUser,t.payload.endUser),n.isOutbound=a,a&&(n.assignedAgentId=t.payload.assignedAgentId)},RECEIVE_EXTERNAL_ID:function receiveExternalIdHandler(e){var t=e.action;e.draft.endUser.externalId=t.payload},UPDATE_INSTANCE_ID:function updateInstanceIdHandler(e){var t=e.action;e.draft.instanceId=t.payload},RECEIVE_EXTERNAL_EMAIL:function receiveExternalEmailHandler(e){var t=e.action;e.draft.endUser.externalEmail=t.payload},RECEIVE_EXTERNAL_JWT:function receiveExternalJwtHandler(e){var t=e.action,n=e.draft;n.endUser.userJwt=t.payload,n.endUser.waitForUserJwt=!1},WAIT_FOR_EXTERNAL_JWT:function waitForExternalJwtHandler(e){e.action;e.draft.endUser.waitForUserJwt=!0},RECEIVE_GDPR:function receiveGDPRHandler(e){var t=e.action,n=e.draft;n.gdpr=Object(l.a)({},n.gdpr,t.payload)},RECEIVE_CONTEXT:function receiveContextHandler(e){var t=e.action;e.draft.context=t.payload},RECEIVE_SESSION:function receiveSessionHandler(e){var t=e.action,n=e.draft;n.id=t.payload.session.sessionId,n.sessionStarted=t.payload.session.sessionStarted,n.campaignRefreshToken=t.payload.session.campaignRefreshToken,n.instanceId=t.payload.session.instanceId},RECEIVE_COOKIE_DOMAIN:function receiveCookieDomainHandler(e){var t=e.action,n=e.draft,a=Object(v.a)(null,["payload","cookieDomain"],t);n.cookieDomain=a},RECEIVE_UPDATED_CAMPAIGN_REFRESH_TOKEN:function receiveUpdatedCampaignRefreshTokenHandler(e){var t=e.action;e.draft.campaignRefreshToken=t.payload}},X=Object(s.b)({geo:{},auth:{},sockets:{},endUser:{},isOutbound:!1,gdpr:{needsConsent:!0,hasConsent:!1},instanceId:"",id:null,sessionStarted:null,cookieDomain:"",context:{page:{},timezone:"",userAgent:"",locale:""}},K),Q={TOGGLE_CHAT:function toggleChatHandler(e){var t=e.action;e.draft.chatOpen=t.payload.chatOpen},TOGGLE_COMPOSER:function toggleComposerHandler(e){var t=e.action;e.draft.composerEnabled=t.payload.enabled},TOGGLE_CONVERSATION_HISTORY:function toggleConversationHistoryHandler(e){var t=e.action;e.draft.conversationHistoryOpen=t.payload.conversationHistoryOpen},INIT_COMPLETE:function toggleInitCompleteHandler(e){var t=e.action;e.draft.initComplete=t.payload.initComplete},TOGGLE_WIDGET_TARGETING_MATCHED:function toggleWidgetTargetingCompleteHandler(e){var t=e.action,n=e.draft;n.matchedHours=t.payload.matchedHours,n.matchedTargeting=t.payload.matchedTargeting},RECEIVE_MESSAGES_FOR_CONVERSATION:function receiveMessagesForConversationHandler(e){var t=e.action,n=e.draft,a=t.payload.messages;Object(T.a)(function(e){return Object(Y.c)(e,"permacloseMessage")},a)&&(n.composerEnabled=!1)}},J=Object(s.b)({chatOpen:!1,conversationHistoryOpen:!1,initComplete:!1,matchedHours:!1,matchedTargeting:!1,composerHidden:!1,composerEnabled:!0},Q),Z=Object(a.c)({view:J,embed:H,session:X,targeting:x,conversations:w,campaigns:d,identity:W,impressions:z}),$=function rootReducer(e,t){return"REPLACE_STATE"===t.type&&(e=t.payload.currentState),Z(e,t)},ee=Object(c.a)(function sendMessageEpic(e,t){return e.pipe(Object(s.c)("SEND_MESSAGE"),Object(A.a)(function(){return"controller"===se.name}),Object(g.a)(function(){var e=Object(p.a)(f.a.mark(function _callee(e){var n,a,r,o,i,c,s;return f.a.wrap(function _callee$(u){for(;;)switch(u.prev=u.next){case 0:return n=e.payload,a=function defaultAttributes(){var e=t.value.campaigns.campaignEvalId,n=Object(v.a)(null,["activeCampaign","attributes","campaignId"])(t.value.campaigns),a=Object(v.a)([],["matchedRoutingRules"],t.value.conversations),r=a.map(function(e){return e.id}),o=a.length?Object(I.a)(Object(O.a)(function(e){return e.priority}),a[0],a):null;return Object(l.a)({},e?{targetingEvalUUID:e}:{},o?{targetingRuleId:o.id}:{},r.length?{targetingRuleIds:r}:{},n?{campaignId:n,isExpandable:!0}:{})},r=function getConversationId(){var e=Object(v.a)(null,["activeCampaign","attributes","liveViewInitiated"],t.value.campaigns),n=Object(v.a)(null,["activeCampaign","conversationId"],t.value.campaigns);if(e)return n;var a=t.value.conversations.activeConversation;return a||void 0},o=Object(l.a)({},n.message,{conversationId:r(),attributes:Object(l.a)({},n.message.attributes?n.message.attributes:{},a())}),u.prev=4,u.next=7,Object(b.b)(o);case 7:i=u.sent,c=i.data,se.dispatch(Object(S.f)({message:c,isNew:!n.message.conversationId})),u.next=16;break;case 12:u.prev=12,u.t0=u.catch(4),(s=Object(v.a)(null,["response","status"],u.t0))||403===!s||Object(m.e)(new Error("Failed To send message"),u.t0);case 16:case"end":return u.stop()}},_callee,null,[[4,12]])}));return function(t){return e.apply(this,arguments)}}()),Object(_.a)())},function onReceiveEmbedEpic(e,t){return e.pipe(Object(s.c)("RECEIVE_EMBED_CONFIGURATION"),Object(A.a)(function(){return"controller"===se.name}),Object(g.a)(function(e){e.payload,function isWhitelistedUrl(){var e=document?document.referrer:"",t=Object(v.a)([],["embed","configuration","theme","urlWhitelist"],se.getState());return!!Object(C.a)(t)||!!Object(T.a)(function(t){return e.includes(t)})(h)||t.reduce(function(t,n){return t||e.includes(n)},!1)}()||(Object(R.a)({topic:"destroy-drift"}),Object(m.e)(new Error("NO ACCESS ON THIS DOMAIN")))}),Object(_.a)())},function pushToChannelEpic(e,t){return e.pipe(Object(s.c)("PUSH_TO_CHANNEL"),Object(g.a)(function(e){var n=e.meta,a=e.payload,r=n||{},o=r.clusterName,i=r.channelName,c=r.eventName;if(c&&o&&i){var s=Object(v.a)(null,["session","sockets",o,"channels",i],t.value);s&&s.push(c,a)}}),Object(_.a)())},function updateEndUserEmailEpic(e,t){return e.pipe(Object(s.c)("IDENTIFY_LEAD"),Object(A.a)(function(){return"controller"===se.name}),Object(g.a)(function(e){var t=e.payload;Object(j.f)({email:t})}),Object(_.a)())}),te=n("H/qh"),ne=["__DRIFT_WIDGET_RECEIVE_CHANNEL","REPLACE_STATE"],ae=function actionSyncMiddleware(){return function(e){return function(t){return t._foreignDispatch||Object(te.a)(t.type,ne)||Object(R.a)({topic:"".concat(se.name,":action-dispatch"),message:{action:t}}),e(t)}}},re="PRODUCTION"!==i.a.ENV&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:a.d,oe=Object(r.a)(),ie=o.a.prototype.ofType;o.a.prototype.ofType=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return ie.apply(void 0,t.map(function(e){return"".concat(i.a.REDUX_ACTION_NAMESPACE,"_").concat(e)}))};var ce=function configureStore(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(a.e)($,e,re(Object(a.a)(ae,oe)));return oe.run(ee),t}(),se=t.a=ce},"7Qib":function(e,t,n){"use strict";n.d(t,"l",function(){return g}),n.d(t,"d",function(){return _}),n.d(t,"g",function(){return b}),n.d(t,"m",function(){return S}),n.d(t,"j",function(){return m}),n.d(t,"e",function(){return C}),n.d(t,"a",function(){return T}),n.d(t,"b",function(){return R}),n.d(t,"h",function(){return h}),n.d(t,"i",function(){return j}),n.d(t,"c",function(){return N}),n.d(t,"f",function(){return y}),n.d(t,"k",function(){return M});var a=n("s8DI"),r=n("WwEg"),o=n("mj2O"),i=n.n(o),c=n("7SM1"),s=n("31Yt"),u=n("Maj3"),d=n("woTc"),E=n("weY7"),f=n("dMPp"),l=n("KwHb"),p=n("8SHQ"),v=n("njw0"),I=n("ocZZ"),O="PRODUCTION"!==p.a.ENV,A="PRODUCTION"!==p.a.ENV,g=function(){var e=Object(c.a)(i.a.mark(function _callee(e){return i.a.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,n){try{setTimeout(function(){t("")},e)}catch(a){n("Pause timeout failed")}}));case 1:case"end":return t.stop()}},_callee)}));return function pause(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(c.a)(i.a.mark(function _callee2(e,t){return i.a.wrap(function _callee2$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,g(t);case 2:return n.next=4,e();case 4:case"end":return n.stop()}},_callee2)}));return function delay(t,n){return e.apply(this,arguments)}}(),b=function interval(e,t){var n=null,a=function run(){n=window.setTimeout(r,t)},r=function onTimeout(){e&&e(),a()};return a(),function(){n&&(window.clearTimeout(n),n=null)}},S=function uuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})},m=function log(e){var t,n=e.type,a=void 0===n?"log":n,o=e.data;O&&(t=console)[a].apply(t,["".concat(p.a.PROJECT_NAMESPACE,"::")].concat(Object(r.a)(o)))},C=function error(e,t){var error=e instanceof Error?e:new Error(e);Object(I.a)(error,t),function errorHandler(e){if(A||error instanceof v.a)throw e;m({type:"warn",data:[e.message]})}(error)},T=Object(s.a)(function(e){return Object(u.a)(d.a,Object(E.a)(Object(f.a)("id")))(e)}),R=function chunkValues(e,t){var n=Object.entries(t).map(function(e){var t=Object(a.a)(e,2);t[0];return t[1]});return Object(l.a)(e,n)},h=function isHTML(e){var t=(new DOMParser).parseFromString(e,"text/html"),n=t.body?t.body.childNodes:[];return Array.from(n).some(function(e){return 1===e.nodeType})},j=function isMobile(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return/iPhone|iPod|Android/i.test(e)||t&&/iPad/i.test(e)},N=function debounce(e,t,n){var a=null;return function(){for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];var c=n&&!a,s=function later(){a=null,n||e.apply(this,o)};a?(clearTimeout(a),a=setTimeout(s,t)):a=setTimeout(s,t),c&&e.apply(void 0,o)}},y=function getRandomIndex(e,t){return function seededRandom(e){return function(){return 1073741823&(1103515245*e+12345)%2147483647}}(t)()%e},M=function noop(){}},"8SHQ":function(e,t,n){"use strict";var a=n("+vh4"),r=n("DFuO"),o=n("91+0"),i=n("tXSl");t.a="PRODUCTION"===window.__ENV__?i:"MASTER"===window.__ENV__?r:Object(a.a)({},r,o)},"91+0":function(e){e.exports={"//WS_CHAT_BASE":"localhost:4000",ENV:"LOCAL","//WS_USER_ENV":"LOCAL","//WS_USER_PROTOCOL":"ws","//WS_CHAT_PROTOCOL":"ws","//WS_USER_BASE":"localhost:4002"}},DFuO:function(e){e.exports={ENV:"MASTER",PROJECT_NAMESPACE:"DRIFT_WIDGET",ATTACHMENTS_API_BASE:"https://attachments.driftqa-files.com",AUTH_API_BASE:"https://customer2.api.driftqa.com",CUSTOMER_API_BASE:"https://customer2.api.driftqa.com",INTEGRATION_API_BASE:"https://integration.driftqa.com",CONVERSATION_API_BASE:"https://conversation2.api.driftqa.com",EVENT_API_BASE:"https://event2.api.driftqa.com",IDENTIFY_API_BASE:"https://identify.api.driftqa.com",EMBED_API_BASE:"https://embeds.driftcdnqa.com",ENRICHMENT_API_BASE:"https://enrichment.api.driftqa.com",MESSAGES_API_BASE:"https://messaging.api.driftqa.com",TARGETING_API_BASE:"https://targeting.api.driftqa.com",MEETINGS_API_BASE:"https://meetings.api.driftqa.com",MESSAGES_WSS_BASE:"wss://ws.api.driftqa.com",WS_USER_BASE:"widgetsandbox.api.driftqa.com",WS_CHAT_BASE:"chat.api.driftqa.com",WS_VISITOR_PRESENCE_BASE:"presence.api.driftqa.com",WS_PROTOCOL:"wss",WS_NUM_SHARDS:50,METRICS_API_BASE:"https://metrics.api.driftqa.com",MESSAGING_API_BASE:"https://messaging.api.driftqa.com",SALES_INBOX_ID:44,SALES_USER_ID:46894,REDUX_ACTION_NAMESPACE:"__DRIFT_WIDGET",CLIENT_ID:"5su4735sxsu7tx",GIPHY_API_KEY:"sMSS7MboOLsYItFABpnWNSOuszE4HExZ",GIPHY_API_BASE:"https://api.giphy.com/v1/gifs",IFRAMELY_API_KEY:"f0f2cc6ba50c77794e5c5eb2930f3fd5",IFRAMELY_API_BASE:"https://iframe.ly/api",SENTRY_DSN:"https://6a7024aa4c6a4c4d9a797440877237b2@sentry.io/1485028"}},HYPW:function(e,t,n){"use strict";n.d(t,"b",function(){return d}),n.d(t,"c",function(){return E}),n.d(t,"f",function(){return f}),n.d(t,"g",function(){return l}),n.d(t,"h",function(){return p}),n.d(t,"j",function(){return v}),n.d(t,"i",function(){return I}),n.d(t,"k",function(){return O}),n.d(t,"l",function(){return A}),n.d(t,"d",function(){return g}),n.d(t,"m",function(){return _}),n.d(t,"n",function(){return b}),n.d(t,"e",function(){return S}),n.d(t,"o",function(){return m}),n.d(t,"a",function(){return C});var a=n("+vh4"),r=n("5Fu3"),o=n("LVcX"),i=n("ljQm"),c=n("tNhX"),s=function hydrateWithActiveCampaignData(e){var t=r.a.getState().campaigns,n=void 0===t?{}:t;if(e&&e.conversationId){var i=Object(o.a)(null,["activeCampaign","conversationId"],n);if(e.conversationId!==i)return e}var c=Object(o.a)(null,["activeCampaign","attributes","campaignId"],n),s=Object(o.a)(null,["activeCampaign","attributes","startInteraction"],n),u=Object(o.a)(null,["activeCampaign","attributes","playbookId"],n);return Object(a.a)({},e,{campaignId:c,interactionId:s,playbookId:u})},u=function createMessageEventPayload(e){return s({inboxId:e.inboxId,conversationId:e.conversationId})},d=function triggerButtonClickedAPIEvent(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(o.a)(null,["attributes","questionId"],e),n=s({createdAt:e.createdAt,authorId:e.authorId,conversationId:e.conversationId,buttonBody:e.body,questionId:t});Object(c.a)(i.b.CONVERSATION_BUTTON_CLICKED,n)},E=function triggerConversationFirstInteractionAPIEvent(e){var t=s({createdAt:e.createdAt,authorId:e.authorId});Object(c.a)(i.b.CONVERSATION_INTERACTED,t)},f=function triggerEmailCapturedAPIEvent(e){var t=e.email,n=r.a.getState().conversation,a=(void 0===n?{}:n).activeConversation||null,o={data:s({email:t,conversationId:a})};Object(c.a)(i.b.EMAIL_CAPTURED,o)},l=function triggerMeetingRequestedAPIEvent(e){var t=Object(o.a)([],["embed","configuration","team"],r.a.getState()).filter(function(t){return t.id===e});if(t.length){var n=t[0],a={teamMember:{id:n.id,name:n.name}};Object(c.a)(i.b.MEETING_REQUESTED,a)}},p=function triggerMeetingScheduledAPIEvent(e){var t=e.agentId,n=e.meetingTime,a=e.duration,s=e.timeZone,u=e.conversationId,d=Object(o.a)({},["conversations","messages",u],r.a.getState()),E=d[Object.keys(d)[0]],f=Object(o.a)([],["embed","configuration","team"],r.a.getState()).filter(function(e){return e.id===t})[0];if(E){var l=Object(o.a)(null,["attributes","campaignId"],E),p=Object(o.a)(null,["attributes","playbookId"],E),v=Object(o.a)(null,["attributes","startInteraction"],E),I={teamMember:{id:f.id,name:f.name},meeting:{time:n,duration:a,timeZone:s},conversationId:u,playbookId:p,campaignId:l,interactionId:v};Object(c.a)(i.b.MEETING_BOOKED,I)}},v=function triggerMessageSentAPIEvent(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.a)(i.b.MESSAGE_SENT,u(e))},I=function triggerMessageReceivedAPIEvent(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=function getTeamUser(e){return e?Object(o.a)([],["embed","configuration","team"],r.a.getState()).find(function(t){return t.id===e}):null}(e.authorId)||{},n=Object(a.a)({},u(e),{teamMember:{id:t.id,name:t.name}});Object(c.a)(i.b.MESSAGE_RECEIVED,n)},O=function triggerPhoneCapturedAPIEvent(e,t){var n=s({createdAt:e.createdAt,authorId:e.authorId,conversationId:e.conversationId,phone:t});Object(c.a)(i.b.PHONE_NUMBER_CAPTURED,n)},A=function triggerPlaybookClickedAPIEvent(e){var t=(e||{}).conversationId,n=s({conversationId:t});Object(c.a)(i.b.CONVERSATION_PLAYBOOK_CLICKED,n)},g=function triggerConversationSelectedAPIEvent(e){var t=s({conversationId:e});Object(c.a)(i.b.CONVERSATION_SELECTED,t)},_=function triggerPlaybookDismissedAPIEvent(e){var t=e||{},n=t.conversationId,a=t.id,r=s({conversationId:n,messageId:a});Object(c.a)(i.b.CONVERSATION_PLAYBOOK_DISMISSED,r)},b=function triggerPlaybookFiredAPIEvent(e){var t=e||{},n=t.authorId,a=t.conversationId,r=t.createdAt,o=t.id,s=t.attributes,u=(s=void 0===s?{}:s).playbookId,d=s.startInteraction,E=s.interactionId,f=s.campaignId;Object(c.a)(i.b.CONVERSATION_PLAYBOOK_FIRED,{messageId:o,createdAt:r,authorId:n,conversationId:a,interactionId:E||d,playbookId:u,campaignId:f})},S=function triggerConversationStartedAPIEvent(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={inboxId:e.inboxId,conversationId:e.conversationId};Object(c.a)(i.b.CONVERSATION_STARTED,t)},m=function triggerWelcomeMessageAPIEvent(e){var t=e?i.b.WELCOME_MESSAGE_OPENED:i.b.WELCOME_MESSAGE_CLOSED;Object(c.a)(t)},C=function triggerAwayMessageAPIEvent(e){var t=e?i.b.AWAY_MESSAGE_OPENED:i.b.AWAY_MESSAGE_CLOSED;Object(c.a)(t)}},JCzi:function(e,t,n){"use strict";n.d(t,"c",function(){return f}),n.d(t,"a",function(){return l}),n.d(t,"b",function(){return p});var a=n("8lq6"),r=n("C7P9"),o=n("NFvl"),i=n("31Yt"),c=n("Maj3"),s=n("woTc"),u=n("weY7"),d=n("yrQw"),E=n("Bmr4"),f=function orderConversationsBy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"updatedAt";return Object(a.a)([Object(r.a)(Object(o.a)(["conversation","".concat(t)]))])(e)},l=Object(i.a)(function(e){return Object(c.a)(s.a,Object(u.a)(Object(o.a)(["conversation","id"])))(e)}),p=Object(i.a)(function(e){return Object(c.a)(s.a,Object(u.a)(Object(d.a)(Object(E.a)(["attributes","widgetGuid"]),Object(o.a)(["attributes","widgetGuid"]),Object(o.a)(["id"]))))(e)})},Nlzp:function(e,t,n){"use strict";n.d(t,"l",function(){return d}),n.d(t,"e",function(){return E}),n.d(t,"m",function(){return f}),n.d(t,"o",function(){return l}),n.d(t,"k",function(){return p}),n.d(t,"q",function(){return v}),n.d(t,"d",function(){return I}),n.d(t,"n",function(){return O}),n.d(t,"a",function(){return A}),n.d(t,"g",function(){return g}),n.d(t,"b",function(){return _}),n.d(t,"i",function(){return b}),n.d(t,"j",function(){return S}),n.d(t,"f",function(){return m}),n.d(t,"h",function(){return C}),n.d(t,"c",function(){return T}),n.d(t,"r",function(){return R}),n.d(t,"p",function(){return h}),n.d(t,"s",function(){return j});var a=n("+vh4"),r=n("ggb3"),o=n.n(r),i=n("JBtm"),c=n.n(i),s=n("8SHQ"),u=n("fBUP"),d=o.a.create({baseURL:s.a.EMBED_API_BASE}),E=o.a.create({baseURL:s.a.CUSTOMER_API_BASE,headers:{"Content-Type":"application/json"}}),f=o.a.create({baseURL:s.a.MEETINGS_API_BASE,headers:{"Content-Type":"application/json"}}),l=o.a.create({baseURL:s.a.METRICS_API_BASE,headers:{"Content-Type":"application/json"}}),p=o.a.create({baseURL:s.a.INTEGRATION_API_BASE,headers:{"Content-Type":"application/json"}}),v=o.a.create({baseURL:s.a.TARGETING_API_BASE,headers:{"Content-Type":"application/json"}}),I=o.a.create({baseURL:s.a.CONVERSATION_API_BASE}),O=o.a.create({baseURL:s.a.MESSAGES_API_BASE}),A=o.a.create({baseURL:s.a.ATTACHMENTS_API_BASE,paramsSerializer:function paramsSerializer(e){return c.a.stringify(e,{arrayFormat:"repeat"})},headers:{"Content-Type":"application/json"}}),g=o.a.create({baseURL:s.a.GIPHY_API_BASE,params:{api_key:s.a.GIPHY_API_KEY}}),_=o.a.create({baseURL:s.a.AUTH_API_BASE,transformRequest:function transformRequest(e){var t=e.data;return Object(u.b)(t)},headers:{"Content-Type":"application/x-www-form-urlencoded"}}),b=o.a.create({baseURL:"".concat(s.a.IFRAMELY_API_BASE,"/iframely"),params:{key:s.a.IFRAMELY_API_KEY}}),S=o.a.create({baseURL:"".concat(s.a.IFRAMELY_API_BASE,"/oembed"),params:{key:s.a.IFRAMELY_API_KEY,omit_script:1}}),m=o.a.create({baseURL:s.a.EVENT_API_BASE,headers:{"Content-Type":"application/json"}}),C=o.a.create({baseURL:s.a.EVENT_API_BASE,headers:{"Content-Type":"application/json"}}),T=o.a.create({}),R=o.a.create({}),h=o.a.create({}),j=o.a.create({}),N=function requestTimeInterceptor(e){return e.ts=window.performance&&window.performance.now?performance.now():0,e},y=function responseTimeInterceptor(e){if(!window.performance||!window.performance.now)return Object(a.a)({},e,{responseTime:0});var t=Number(performance.now()-e.config.ts);return Object(a.a)({},e,{responseTime:t})};m.interceptors.request.use(u.a),I.interceptors.request.use(u.a),E.interceptors.request.use(u.a),O.interceptors.request.use(u.a),l.interceptors.request.use(u.a),A.interceptors.request.use(u.a),p.interceptors.request.use(u.a),v.interceptors.request.use(u.a),f.interceptors.request.use(u.a),I.interceptors.request.use(N),_.interceptors.request.use(N),E.interceptors.request.use(N),O.interceptors.request.use(N),p.interceptors.request.use(N),v.interceptors.request.use(N),f.interceptors.request.use(N),I.interceptors.response.use(y),E.interceptors.response.use(y),O.interceptors.response.use(y),_.interceptors.response.use(y),p.interceptors.response.use(y),v.interceptors.response.use(y),f.interceptors.response.use(y)},P6UB:function(e,t,n){"use strict";n.d(t,"a",function(){return d}),n.d(t,"b",function(){return E});var a=n("mj2O"),r=n.n(a),o=n("+vh4"),i=n("7SM1"),c=n("Lm5s"),s=n("LVcX"),u=n("7Qib"),d=function(){var e=Object(i.a)(r.a.mark(function _callee(e){var t,n,a,i,d;return r.a.wrap(function _callee$(r){for(;;)switch(r.prev=r.next){case 0:return t=e.topic,n=e.message,a=Object(o.a)({_meta:{id:Object(u.m)()}},n),r.prev=2,r.next=5,Object(c.send)(window.parent,t,a,{timeout:2e4,window:window.parent});case 5:return i=r.sent,r.abrupt("return",i);case 9:return r.prev=9,r.t0=r.catch(2),d=Object(s.a)("",["name"],n),Object(u.j)({data:["Failed to broadcast message ".concat(t," - ").concat(d),n,r.t0]}),r.abrupt("return",Promise.reject("Could not broadcast message with topic: ".concat(t," - ").concat(r.t0)));case 14:case"end":return r.stop()}},_callee,null,[[2,9]])}));return function broadcast(t){return e.apply(this,arguments)}}(),E=function listen(e){var t=e.topic,n=e.handler;return Object(c.on)(t,{window:window.parent},n)}},PhDg:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var a=/[-!#$%&'*+/0-9=?A-Z^_a-z{|}~](\.?[-!#$%&'*+/0-9=?A-Z^_a-z`{|}~])*@[a-zA-Z0-9](-*\.?[a-zA-Z0-9])*\.[a-zA-Z](-?[a-zA-Z0-9])+/,r=new RegExp("^".concat(a.source,"$")),o=function validateEmail(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1]?r:a;return!!(function emailExists(e){return!!e}(e)&&function emailHasCorrectLength(e){return e.length<254}(e)&&function emailMatchesRegex(e){return t.test(e)}(e)&&function emailHasAllowedParts(e){var t=e.split("@");return!(t[0].length>64)&&!t[1].split(".").some(function(e){return e.length>63})}(e))}},PrlS:function(e,t,n){"use strict";n.d(t,"a",function(){return l}),n.d(t,"b",function(){return p}),n.d(t,"c",function(){return v});var a=n("mj2O"),r=n.n(a),o=n("7SM1"),i=n("A5mO"),c=n("7Qib"),s=n("5Fu3"),u=n("P6UB"),d=n("S5C5"),E=function getPageContext(e){return{hostname:e.location.hostname,referrer:Object(d.b)(e.referrer),search:e.location.search,path:Object(d.b)(e.location.pathname),title:e.title,url:Object(d.b)(e.location.href),rawUrl:e.location.href}},f=function getTimezone(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){Object(c.j)({data:["Failed to guess timezone via Intl",e]})}try{return Object(i.a)().timezone().name}catch(e){return Object(c.j)({data:["Failed to guess timezone for context - ".concat(e.message)]}),null}},l=function backfillUnsupportedTimezones(){var e=Object(i.a)();e.timezones.pst8pdt=e.timezones["america/los_angeles"],e.timezones.mst=e.timezones["america/denver"],e.timezones.cet=e.timezones["europe/paris"]},p=function(){var e=Object(o.a)(r.a.mark(function _callee(){var e,t,n;return r.a.wrap(function _callee$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(u.a)({topic:"get-host-window"});case 2:return e=a.sent,t=e.data,n=void 0===t?{}:t,a.abrupt("return",{page:E(n),userAgent:n.userAgent,locale:n.locale,timezone:f(),currentSessionStartedAt:n.drift_session_started,currentPageViewStartedAt:n.drift_page_view_started,activeSessionStartedAt:n.drift_session_started,innerWidth:n.innerWidth,innerHeight:n.innerHeight});case 6:case"end":return a.stop()}},_callee)}));return function fetchWindowContext(){return e.apply(this,arguments)}}(),v=function getBrowserContext(){var e=s.a.getState().session,t=(void 0===e?{}:e).context||{},n=t.page||{};return{userAgent:t.userAgent,timezone:t.timezone,locale:t.locale,url:n.url}}},S5C5:function(e,t,n){"use strict";n.d(t,"a",function(){return d}),n.d(t,"c",function(){return E}),n.d(t,"b",function(){return f});var a=n("aUJj"),r=n.n(a),o=n("JBtm"),i=n("PhDg"),c=n("7Qib"),s=n("VzzF"),u=n.n(s),d=function getUrlsFromText(e){return(e.replace("&#64;","@").match(r()({strict:!1}))||[]).filter(function(e){return!Object(i.a)(e,!1)}).map(function(e){return function getParsedUrl(e){try{return Object(o.parseUrl)(e).url}catch(t){Object(c.j)({data:[t],type:"warning"})}}(e)})},E=function parseQueryStringBooleans(e){var t={};return Object.keys(e).forEach(function(n){"true"===e[n].toLowerCase()?t[n]=!0:"false"===e[n].toLowerCase()?t[n]=!1:t[n]=e[n]}),t},f=function normalizeDriftUrl(e){if(!e)return"";try{return u()(e,{normalizeProtocol:!0,stripHash:!1,stripWWW:!0,removeQueryParameters:[],removeTrailingSlash:!0}).replace(/^https?:\/\//,"")}catch(t){return Object(c.j)({data:["Failed to normalizeUrl"]}),e}}},YXQ5:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"k",function(){return o}),n.d(t,"j",function(){return i}),n.d(t,"f",function(){return c}),n.d(t,"b",function(){return s}),n.d(t,"c",function(){return u}),n.d(t,"m",function(){return d}),n.d(t,"d",function(){return E}),n.d(t,"e",function(){return f}),n.d(t,"g",function(){return l}),n.d(t,"i",function(){return p}),n.d(t,"l",function(){return v}),n.d(t,"h",function(){return I}),n.d(t,"o",function(){return O}),n.d(t,"n",function(){return A});var a=n("dn/m"),r=function clearActiveConversation(e){return Object(a.a)({type:"CLEAR_ACTIVE_CONVERSATION",payload:e})},o=function setActiveConversation(e){return Object(a.a)({type:"SET_ACTIVE_CONVERSATION",payload:e})},i=function sendMessage(e){return Object(a.a)({type:"SEND_MESSAGE",payload:e})},c=function receiveMessageSent(e){return Object(a.a)({type:"RECEIVE_MESSAGE_SENT",payload:e})},s=function receiveAgentMessage(e){return Object(a.a)({type:"RECEIVE_AGENT_MESSAGE",payload:e})},u=function receiveAttachments(e){return Object(a.a)({type:"RECEIVE_ATTACHMENTS",payload:e})},d=function setIsTyping(e){return Object(a.a)({type:"RECEIVE_IS_TYPING",payload:e})},E=function receiveConversation(e){return Object(a.a)({type:"RECEIVE_CONVERSATION",payload:e})},f=function receiveInitialActiveConversation(e){return Object(a.a)({type:"RECEIVE_INITIAL_ACTIVE_CONVERSATION",payload:e})},l=function receiveMessagesForConversation(e){return Object(a.a)({type:"RECEIVE_MESSAGES_FOR_CONVERSATION",payload:e})},p=function receiveReadMessages(e){return Object(a.a)({type:"RECEIVE_READ_MESSAGES",payload:e})},v=function setActiveDriftlink(e){return Object(a.a)({type:"SET_ACTIVE_DRIFTLINK",payload:e})},I=function receiveReadMessage(e){return Object(a.a)({type:"RECEIVE_READ_MESSAGE",payload:e})},O=function setUnreadMessage(e){return Object(a.a)({type:"SET_UNREAD_MESSAGE",payload:e})},A=function setMatchedConversationRoutingRules(e){return Object(a.a)({type:"RECEIVED_MATCHED_CONVO_ROUTING_RULES",payload:e})}},bMBU:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return i});var a=n("Nlzp"),r=n("HYPW"),o=function sendMessage(e){var t=e.conversationId&&"NEW"!==e.conversationId,n=t?"/conversations/".concat(e.conversationId,"/messages"):"/messages";return a.n.post(n,e).then(function(e){return c(e.data,t),e})},i=function getMessagesForConversation(e){var t=e.limit,n=void 0===t?10:t,r=e.conversationId,o=e.from;return a.n.get("conversations/".concat(r,"/messages/page/v2"),{params:{limit:n,from:o,withReceipts:!0}})},c=function onMessageSent(e,t){t||(Object(r.e)(e),Object(r.c)(e)),Object(r.j)(e)}},"dn/m":function(e,t,n){"use strict";var a=n("+vh4"),r=n("hX/4"),o=n("9OUN"),i=n("Nw0q"),c=n("8SHQ"),s=n("6BAR"),u=function createReducer(e){return function(t,n){return function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t,r=arguments.length>1?arguments[1]:void 0;return Object(s.a)(a,function(t){if(!r.type)return t;var a=n[function resolveLocalAction(e,t){return t.replace("".concat(e,"_"),"")}(e,r.type)];return a?a({draft:t,action:r}):t})}}};n.d(t,"b",function(){return I}),n.d(t,"a",function(){return O}),n.d(t,"c",function(){return A});var d=c.a.REDUX_ACTION_NAMESPACE,E=function actionType(e,t){return"".concat(e,"_").concat(t)},f=function CreateAction(e){return function(t){var n=t.type,o=Object(r.a)(t,["type"]);return Object(a.a)({type:E(e,n)},o)}},l=function MergeReducers(e){return function(e){return Object(o.c)({reducers:e})}},p=function OfType(e){return function(t){return Object(i.a)("".concat(e,"_").concat(t))}},v=function reduxInit(e){return{createReducer:u(e),createAction:f(e),mergeReducers:l(),ofType:p(e)}}(d),I=v.createReducer,O=v.createAction,A=(v.mergeReducers,v.ofType)},fBUP:function(e,t,n){"use strict";var a=n("8SHQ"),r=n("5Fu3"),o=function computeWSShardId(e){return e%50};n.d(t,"b",function(){return i}),n.d(t,"d",function(){return c}),n.d(t,"c",function(){return s}),n.d(t,"a",function(){return u});var i=function encodeData(e){return Object.keys(e).map(function(t){return"".concat(encodeURIComponent(t),"=").concat(encodeURIComponent(e[t]))}).join("&")},c=function resolveWSAPIBase(e){return"LOCAL"===a.a.WS_USER_ENV?"".concat(a.a.WS_CHAT_BASE):"".concat(e,"-").concat(o(e),".").concat(a.a.WS_CHAT_BASE)},s=function resolvePresenceAPIBase(e){return"LOCAL"===a.a.WS_USER_ENV?"".concat(a.a.WS_PRESENCE_BASE):"".concat(o(e),".").concat(a.a.WS_LIVE_BASE)},u=function authInterceptor(e){var t=r.a.getState().session.auth.accessToken;return e.headers.Authorization=t?"Bearer ".concat(t):"",e}},ljQm:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return o});var a=n("jm9a");var r=function _objectSpread(e){for(var t=1;t<arguments.length;t++)if(t%2){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){Object(a.a)(e,t,n[t])})}else Object.defineProperties(e,Object.getOwnPropertyDescriptors(arguments[t]));return e}({GDPR_CLICKED:"drift::gdprClicked"},{API_READY:"drift::apiReady",READY:"drift::ready"},{},{EMAIL_CAPTURED:"drift::emailCapture",PHONE_NUMBER_CAPTURED:"drift::phoneCapture"},{},{CONVERSATION_STARTED:"drift::startConversation",CONVERSATION_SELECTED:"drift::conversation:selected",CONVERSATION_BUTTON_CLICKED:"drift::conversation:buttonClicked",CONVERSATION_INTERACTED:"drift::conversation:firstInteraction",CONVERSATION_PLAYBOOK_CLICKED:"drift::conversation:playbookClicked",CONVERSATION_PLAYBOOK_FIRED:"drift::conversation:playbookFired",CONVERSATION_PLAYBOOK_DISMISSED:"drift::conversation:playbookDismissed"},{},{MEETING_REQUESTED:"drift::scheduling:requestMeeting",MEETING_BOOKED:"drift::scheduling:meetingBooked"},{},{WELCOME_MESSAGE_OPENED:"drift::welcomeMessage:open",WELCOME_MESSAGE_CLOSED:"drift::welcomeMessage:close",AWAY_MESSAGE_OPENED:"drift::awayMessage:open",AWAY_MESSAGE_CLOSED:"drift::awayMessage:close"},{},{MESSAGE_RECEIVED:"drift::message",MESSAGE_SENT:"drift::message:sent"}),o=([].concat(["track","reset","debug","show","ping","page","hide","on","off","evaluateCampaignTargeting","toggleHoursAndTargeting","waitForUserJwt","setUserJwt"],["startInteraction","goToConversation","goToNewConversation","goToConversationList","hideAwayMessage","hideChat","hideWelcomeMessage","openChat","scheduleMeeting","setUserAttributes","showAwayMessage","showWelcomeMessage","showWelcomeOrAwayMessage","startVideoGreeting"]),{CLEAR_EVENT_Q:"drift::_clearEventQ",CHAT_READY:"drift::chatReady",CONTROLLER_READY:"drift::controllerReady"})},njw0:function(e,t,n){"use strict";var a=n("uIJS"),r=n("qytN"),o=n("7jL2"),i=n("LvsC"),c=n("TVvm"),s=function(e){function BootstrapFailedError(e){var t;return Object(a.a)(this,BootstrapFailedError),(t=Object(r.a)(this,Object(o.a)(BootstrapFailedError).call(this,e))).name=t.constructor.name,t}return Object(i.a)(BootstrapFailedError,e),BootstrapFailedError}(Object(c.a)(Error));t.a=s},ocZZ:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var a=n("1FNf"),r=n("jrvE"),o=n("LVcX"),i=n("Jstd"),c=n("8SHQ"),s=n("5Fu3"),u=["timeout of 0ms exceeded","network error","loading chunk","ns.GetCommandSrc","NO ACCESS ON THIS DOMAIN","the operation is insecure","NS_ERROR","Access is denied","Could not broadcast message with topic","No ack for postMessage"];"LOCAL"!==c.a.ENV&&Object(r.a)({dsn:c.a.SENTRY_DSN,maxBreadcrumbs:50,attachStacktrace:!0,release:"widget-core@ c4fd4fadb63f9e5ac58557c99f1223356c1611fb",environment:c.a.ENV,beforeSend:function beforeSend(e,t){if(!t||!t.originalException)return e;var n=Object(o.a)("",["originalException","message"],t);if(function isCustomEventError(e){var t=Object(o.a)(null,["detail","reason"],e);return e instanceof CustomEvent&&t instanceof Error}(n))return function handleCustomEventError(e){Object(a.c)(function(t){var n=e.detail.reason;e.detail.reason="<error object captured above>",t.setExtras({originalThrownObject:e}),d(n)})}(n),null;var r="";return"string"==typeof n?r=n:n instanceof Error&&(r=n.message),r.length&&Object(i.a)(function(e){return-1!==r.toLowerCase().indexOf(e.toLowerCase())},u)?null:e}});var d=function captureException(e,t){Object(a.b)(function(e){var n=s.a.getState(),a=n.session,r=void 0===a?{}:a,i=n.embed,c=void 0===i?{}:i,u=Object(o.a)(null,["context","page","url"],r),d=c.orgId;d&&e.setTag("orgId",d),u&&e.setTag("url",u),t&&e.setExtra("error-meta",t),e.setExtra("widget-frame","core"),e.setExtra("redux",{session:s.a.getState().session,view:s.a.getState().view,org:s.a.getState().embed.orgId,identity:s.a.getState().identity})}),Object(a.a)(e)}},tNhX:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n("P6UB"),r=function createEvent(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e&&e.length&&Object(a.a)({topic:"create-event",message:{name:e,meta:t}})}},tXSl:function(e){e.exports={ENV:"PRODUCTION",PROJECT_NAMESPACE:"DRIFT_WIDGET",ATTACHMENTS_API_BASE:"https://attachments.drift-files.com",AUTH_API_BASE:"https://customer.api.drift.com",CUSTOMER_API_BASE:"https://customer.api.drift.com",INTEGRATION_API_BASE:"https://integration.drift.com",CONVERSATION_API_BASE:"https://conversation.api.drift.com",EVENT_API_BASE:"https://event.api.drift.com",IDENTIFY_API_BASE:"https://identify.api.drift.com",EMBED_API_BASE:"https://embeds.driftcdn.com",ENRICHMENT_API_BASE:"https://enrichment.api.drift.com",MESSAGES_API_BASE:"https://messaging.api.drift.com",TARGETING_API_BASE:"https://targeting.api.drift.com",MEETINGS_API_BASE:"https://meetings.api.drift.com",MESSAGES_WSS_BASE:"wss://ws.api.drift.com",WS_USER_BASE:"widgetsandbox.api.drift.com",WS_CHAT_BASE:"chat.api.drift.com",WS_LIVE_BASE:"live.api.drift.com",WS_VISITOR_PRESENCE_BASE:"presence.api.drift.com",WS_PROTOCOL:"wss",WS_NUM_SHARDS:50,METRICS_API_BASE:"https://metrics.api.drift.com",MESSAGING_API_BASE:"https://messaging.api.drift.com",SALES_INBOX_ID:44,SALES_USER_ID:46894,REDUX_ACTION_NAMESPACE:"__DRIFT_WIDGET",CLIENT_ID:"f6zuizdyhxrm7r",GIPHY_API_KEY:"sMSS7MboOLsYItFABpnWNSOuszE4HExZ",GIPHY_API_BASE:"https://api.giphy.com/v1/gifs",IFRAMELY_API_KEY:"f0f2cc6ba50c77794e5c5eb2930f3fd5",IFRAMELY_API_BASE:"https://iframe.ly/api",SENTRY_DSN:"https://6a7024aa4c6a4c4d9a797440877237b2@sentry.io/1485028"}},tjUo:function(e,t,n){"use strict";n.r(t);n("pNMO"),n("DEfu"),n("I9xj"),n("kSko"),n("zKZe"),n("uL8W"),n("Eqjn"),n("HRxU"),n("eoL8"),n("5xtp"),n("T63A"),n("3KgV"),n("wfmh"),n("5DmW"),n("27RR"),n("cDke"),n("NBAS"),n("Kxld"),n("yQYn"),n("4h0Y"),n("5D5o"),n("tkto"),n("v5b1"),n("W/eh"),n("zuhW"),n("r5Og"),n("ExoC"),n("07d7"),n("B6y2"),n("5s+n"),n("p532"),n("PKPk"),n("66V8"),n("8go2"),n("DrvE"),n("kCkZ"),n("3bBZ"),n("4Brf"),n("tjZM"),n("3I1R"),n("7+kd"),n("0oug"),n("KhsS"),n("gOCb"),n("a57n"),n("GXvd"),n("I1Gw"),n("gXIK"),n("lEou"),n("gbiT"),n("ma9I"),n("9bJ7"),n("inlA"),n("9tb/"),n("JTJg"),n("Rm1S"),n("hDyC"),n("TZCg"),n("2A+d"),n("OM9Z"),n("UxlC"),n("hByQ"),n("EnZy"),n("LKBx"),n("SYor"),n("HiXI"),n("7ueG"),n("GKVU"),n("E5NM"),n("BNMt"),n("zHFu"),n("x83w"),n("l2dK"),n("GRPF"),n("xdBZ"),n("mRH6"),n("yWo2"),n("IxXR"),n("TFPT"),n("Zk8X"),n("fN96"),n("DhMN"),n("rZ3M"),n("apDx"),n("4XaG"),n("6V7H");var a=n("PrlS");!function pollyfillKickoff(e){try{[1].includes(1)&&e()}catch(t){Promise.all([n.e(7).then(n.t.bind(null,"JtnU",7)),n.e(6).then(n.t.bind(null,"LSZE",7)),Promise.resolve().then(n.t.bind(null,"3yYM",7))]).then(function(){e()}).catch(function(e){return console.error("Error importing polyfills",e)})}}(function kickOff(){Object(a.a)(),Promise.all([n.e(14),n.e(18)]).then(n.bind(null,"aox4")).catch(function(e){return console.warn("loading root widget failed",e)})})}},[[0,4,5]]]);