(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"+teq":function(e,t,a){"use strict";a.r(t);var n=a("mj2O"),i=a.n(n),r=a("7SM1"),c=a("s8DI"),o=(a("sXTY"),a("O94r")),s=a.n(o),l=a("LVcX"),u=a("DboL"),m=a("BCC6"),d=a("ERkP"),f=a.n(d),g=a("uDfI"),b=a("67PG"),p=a("bMBU"),v=a("afbR");a("IuzP");function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function _objectWithoutProperties(e,t){if(null==e)return{};var a,n,i=function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var h=f.a.createElement("path",{fill:"#9DA9B0",fillRule:"evenodd",d:"M8 16c-4.411 0-8-3.589-8-8s3.589-8 8-8 8 3.589 8 8-3.589 8-8 8zM8 1.333A6.674 6.674 0 0 0 1.333 8 6.674 6.674 0 0 0 8 14.667 6.674 6.674 0 0 0 14.667 8 6.674 6.674 0 0 0 8 1.333zm0 12c-1.942 0-3.705-1.167-4.601-3.046A.666.666 0 1 1 4.6 9.713C5.275 11.123 6.577 12 8 12c1.431 0 2.733-.875 3.397-2.285a.666.666 0 1 1 1.206.57c-.886 1.88-2.65 3.048-4.603 3.048zM10.667 8a1.335 1.335 0 0 1-1.334-1.333 1.335 1.335 0 0 1 2.667 0C12 7.402 11.402 8 10.667 8zM5.333 8A1.335 1.335 0 0 1 4 6.667c0-.736.599-1.334 1.333-1.334a1.335 1.335 0 0 1 0 2.667z"}),j=function SvgEmoji(e){var t=e.svgRef,a=_objectWithoutProperties(e,["svgRef"]);return f.a.createElement("svg",_extends({width:16,height:16,viewBox:"0 0 16 16",ref:t},a),h)},O=f.a.forwardRef(function(e,t){return f.a.createElement(j,_extends({svgRef:t},e))}),A=(a.p,a("liE7")),E=a("7VeV"),y=a("+vh4"),w=(a("86gp"),a("ovDp")),k=a("Nlzp"),C=function uploadAttachment(e,t){var a=new FormData;return a.append("conversationId",t),a.append("file",e),k.a.post("/attachments",a)},M=function fetchAttachments(e,t){return k.a.get("/attachments",{params:{id:e},cancelToken:t})},N=a("T4tG"),S=a("PCyI"),T=a("3B44"),_=a("YXQ5"),P=a("+XV7"),I="NONE",R="PENDING",z="ERROR",x="SIZE_ERROR",B=function AttachmentSender(e){var t=e.onSubmit,a=e.activeConversation,n=e.disabled,o=void 0!==n&&n,s=Object(A.useTranslation)().t,l=Object(g.b)(),u=Object(d.useState)(I),m=Object(c.a)(u,2),b=m[0],p=m[1],v=Object(T.a)(),h=v.borderStyles,j=v.primaryTextColor,O=Object(g.c)(function(e){return e.session.endUser.id}),E=Object(d.useCallback)(function(){var e=Object(r.a)(i.a.mark(function _callee(e){var n,r,c,s,u;return i.a.wrap(function _callee$(i){for(;;)switch(i.prev=i.next){case 0:if(!(o||!e||e.length<1)){i.next=2;break}return i.abrupt("return");case 2:return p(R),n=function sendAttachmentMessage(e){t({message:Object(P.a)({attachments:e,activeConversation:a||null,authorId:O})})},r=e.filter(function(e){return e.size<26214400}).map(function(e){return C(e,a)}),i.prev=5,i.next=8,Promise.all(r);case 8:c=i.sent,s=c.map(function(e){return e.data}),u=s.map(function(e){return e.id}),n(u),l(Object(_.c)({attachments:s})),p(I),i.next=19;break;case 16:i.prev=16,i.t0=i.catch(5),p(z);case 19:case"end":return i.stop()}},_callee,null,[[5,16]])}));return function(t){return e.apply(this,arguments)}}(),[a,t,O,l,o]),k=Object(w.a)({onDrop:E,disabled:o}),M=k.getRootProps,B=k.getInputProps;return f.a.createElement(f.a.Fragment,null,b===R&&f.a.createElement("div",{className:"drift-widget-attachment-send-status drift-widget-attachment-send-status--pending",style:Object(y.a)({},h,j)},f.a.createElement("span",{className:"drift-widget-attachment-send-status--text"},s("attachment.uploading"))),(b===z||b===x)&&f.a.createElement("div",{className:"drift-widget-attachment-send-status drift-widget-attachment-send-status--failed"},f.a.createElement("span",{className:"drift-widget-attachment-send-status--text"},s(b===x?"attachment.errorSize":"attachment.error")),f.a.createElement(S.a,{onClick:function closeError(){p(I)},className:"drift-widget-attachment-send-status--close"},f.a.createElement(N.k,{width:10,height:10}))),f.a.createElement("button",Object.assign({},M(),{"aria-label":"add attachment",disabled:o}),f.a.createElement("input",B()),f.a.createElement(N.a,null)))},D=(a("Q80r"),a("oFTC")),L=a("8ozv"),H=(a("uqJV"),Object(d.lazy)(function(){return a.e(8).then(a.t.bind(null,"mznO",7))})),F=function EmojiPicker(e){var t=e.open,a=e.onAddEmoji,n=e.onClickOutside,i=Object(A.useTranslation)().t,r=Object(g.c)(function(e){return e.conversations}).activeConversation,c="en"!==Object(g.c)(function(e){return Object(l.a)("en",["embed","configuration","locale"],e)}),o=Object(d.useMemo)(function(){return function createEmojiMartI18nProp(e){return{search:e("emoji.search"),clear:e("emoji.clear"),notfound:e("emoji.notfound"),skintext:e("emoji.skintext"),categories:{search:e("emoji.category.search"),recent:e("emoji.category.recent"),smileys:e("emoji.category.smileys"),people:e("emoji.category.smileys"),nature:e("emoji.category.nature"),foods:e("emoji.category.foods"),activity:e("emoji.category.activity"),places:e("emoji.category.places"),objects:e("emoji.category.objects"),symbols:e("emoji.category.symbols"),flags:e("emoji.category.flags"),custom:e("emoji.category.custom")},categorieslabel:e("emoji.categorieslabel"),skintones:{1:e("emoji.skintone1"),2:e("emoji.skintone2"),3:e("emoji.skintone3"),4:e("emoji.skintone4"),5:e("emoji.skintone5"),6:e("emoji.skintone6")}}}(i)},[i]),u=Object(d.useRef)(null);Object(D.a)(u,function(e){n(e)});return f.a.createElement("div",{ref:u,className:s()("drift-widget-composer-emoji-picker",{"drift-widget-composer-emoji-picker--open":t,"drift-widget-composer-emoji-picker--full":r,"drift-widget-composer-emoji-picker--mini":!r,"drift-widget-composer-emoji-picker--hide-search":c})},f.a.createElement(d.Suspense,{fallback:f.a.createElement("p",null,i("status.loading"))},f.a.createElement(H,{onSelect:function addEmojiToMessage(e){var t=e.native;a(function(e){return"".concat(e," ").concat(t)})},sheetSize:64,set:"apple",data:L,exclude:["flags","symbols","objects"],perLine:6,emojiTooltip:!c,i18n:o})))};a("RJSH");function gif_extends(){return(gif_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function gif_objectWithoutProperties(e,t){if(null==e)return{};var a,n,i=function gif_objectWithoutPropertiesLoose(e,t){if(null==e)return{};var a,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var G,U=f.a.createElement("path",{fill:"#9DA9B0",fillRule:"nonzero",d:"M7.92 11.13c-1.94 0-3.5-1.37-3.5-3.46 0-2.1 1.56-3.45 3.5-3.45 1.3 0 2.15.62 2.68 1.38l-.95.55c-.36-.5-.99-.89-1.73-.89-1.32 0-2.3 1-2.3 2.41 0 1.39.98 2.41 2.3 2.41.68 0 1.28-.31 1.58-.6V8.45h-2V7.42h3.16v2.49c-.65.73-1.59 1.22-2.74 1.22zm5.016-.13h-1.17V4.33h1.17V11zm2.475 0h-1.17V4.33h4.57v1.03h-3.4v1.72h3.33v1.03h-3.33V11zM3 0h17a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3H3a3 3 0 0 1-3-3V3a3 3 0 0 1 3-3zm0 1.3A1.7 1.7 0 0 0 1.3 3v10A1.7 1.7 0 0 0 3 14.7h17a1.7 1.7 0 0 0 1.7-1.7V3A1.7 1.7 0 0 0 20 1.3H3z"}),W=function SvgGif(e){var t=e.svgRef,a=gif_objectWithoutProperties(e,["svgRef"]);return f.a.createElement("svg",gif_extends({width:23,height:16,viewBox:"0 0 23 16",ref:t},a),U)},K=f.a.forwardRef(function(e,t){return f.a.createElement(W,gif_extends({svgRef:t},e))}),V=(a.p,a("97O6")),Z=a.n(V),q=["en","es","pt","id","fr","ar","tr","th","vi","de","it","ja","zh-CN","zh-TW","ru","ko","pl","nl","ro","hu","sv","cs","hi","bn","da","fa","tl","fi","iw","ms","no","uk"],Q=function localeToGiphyLang(e){switch(e){case"de-DE-formal":return"de";case"zh":return"zh-CN";case"zh-HK":return"zh-TW";case"pt-BR":return"pt"}return q.includes(e)?e:"en"},J=function getTrendingGiphys(e){return k.g.get("/trending",{params:{limit:e}})},X=function getSearchGiphys(e,t){var a=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).locale;return k.g.get("/search",{params:{limit:t,q:e,lang:Q(a)}})},Y=function useEmbedLocale(){return Object(g.c)(function(e){return Object(l.a)("en",["embed","configuration","locale"],e)})},$=a("WkOX"),ee=a("7Qib"),te=function useIsMobile(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object(g.c)(function(t){return Object(ee.i)(t.session.context.userAgent,e)})},ae=function GiphyPicker(e){var t=e.onAddGiphy,a=e.disabled,n=void 0!==a&&a,o=Object(A.useTranslation)().t,l=Y(),u=Object(d.useState)([]),m=Object(c.a)(u,2),g=m[0],b=m[1],p=Object(d.useState)(!1),v=Object(c.a)(p,2),h=v[0],j=v[1],O=Object(d.useRef)(null),E=Object(d.useRef)(null),y=Object($.a)(""),w=y.value,k=y.onChange,C=te(),M=Object(d.useMemo)(function(){return Object(ee.c)(function(){var e=Object(r.a)(i.a.mark(function _callee(e){var t,a;return i.a.wrap(function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,X(e,51,{locale:l});case 2:t=n.sent,a=t.data,b(a.data);case 5:case"end":return n.stop()}},_callee)}));return function(t){return e.apply(this,arguments)}}(),200,!1)},[l]),N=Object(d.useCallback)(Object(r.a)(i.a.mark(function _callee2(){var e,t;return i.a.wrap(function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,J(51);case 2:e=a.sent,t=e.data,b(t.data);case 5:case"end":return a.stop()}},_callee2)})),[]);Object(D.a)(O,function(){return j(!1)});var S=Object(d.useCallback)(function(){j(function(e){return!e})},[]);Object(d.useEffect)(function(){h&&!C&&E.current.focus(),h&&N()},[h,C,N]),Object(d.useEffect)(function(){h&&(w.length>0?M(w):N())},[w,h,M,N]);return f.a.createElement("div",{className:"drift-widget-composer-action",ref:O},f.a.createElement("button",{className:"drift-widget-composer-giphy-toggle",onClick:S,"aria-label":"gifs",disabled:n},f.a.createElement(K,null)),f.a.createElement("div",{className:s()("drift-widget-composer-giphy-picker",{"drift-widget-composer-giphy-picker--show":h,"drift-widget-composer-giphy-picker--mobile":C})},f.a.createElement("div",{className:"drift-widget-composer-giphy-picker-search"},f.a.createElement("input",{className:"drift-widget-input",ref:E,type:"search",placeholder:o("gifPicker.searchPlaceholder"),value:w,onChange:k,onFocus:function onInputFocus(e){C&&e.stopPropagation()}})),f.a.createElement("div",{className:"drift-widget-composer-giphy-picker-list-wrapper"},f.a.createElement("ul",{className:"drift-widget-composer-giphy-list"},g.map(function(e){return f.a.createElement("li",{key:e.id},f.a.createElement("button",{onClick:function onClick(){return function addGiphyToMessage(e){t('<img src="'.concat(e.url,'" alt="gif" />')),S()}(e.images.original)}},f.a.createElement("img",{src:e.images.preview_gif.url,alt:e.title})))}))),f.a.createElement("span",{className:"drift-wdiget-composer-giphy-picker-power"},f.a.createElement("img",{src:Z.a,alt:o("gifPicker.poweredBy")}))))},ne=function useAgentName(e){var t=Object(g.c)(function(e){return e.embed.configuration}).team,a=(void 0===t?[]:t).find(function(t){return t.id===e});return a?a.name||a.email:"agent"},ie=(a("I4Wp"),function AgentTypingIndicator(){var e=Object(A.useTranslation)().t,t=Object(T.a)().widgetBackgroundAlpha,a=Object(g.c)(function(e){return e.conversations.typingIndicators[e.conversations.activeConversation]||{}}),n=a.isTyping,i=void 0!==n&&n,r=a.userId,c=ne(r);return i?f.a.createElement("p",{style:t,className:"agent-typing-indicator"},e("status.agentTyping",{agent:c})):null}),re=a("G8sc"),ce=function useKeyPress(e){var t=e.targetKey,a=e.onKeyDown,n=void 0===a?function(){}:a,i=e.onKeyUp,r=void 0===i?function(){}:i,o=Object(d.useState)(!1),s=Object(c.a)(o,2),l=s[0],u=s[1],m=Object(d.useCallback)(function(e){e.key===t&&(u(!0),n())},[t,n]),f=Object(d.useCallback)(function(e){e.key===t&&(u(!1),r())},[t,r]);return Object(d.useEffect)(function(){return window.addEventListener("keydown",m),window.addEventListener("keyup",f),function(){window.removeEventListener("keydown",m),window.removeEventListener("keyup",f)}},[m,f]),l},oe=a("/685"),se=a("PrlS"),le=function useResolvePrivacy(){var e=Object(g.c)(function(e){return Object(l.a)({},["embed","configuration","dataProtection"])(e)}),t=Object(se.c)().locale,a=function resolvePolicy(){if(!e.policies)return{};var a=e.default||"en",n=t||a,i=e.policies[n]||{};return Object(l.a)(i,n)(e.policies)}(),n=a.privacyPolicyLink,i=a.privacyPolicyLinkText,r=a.privacyPolicyAlwaysOn;return{privacyPolicyLink:n,privacyPolicyLinkText:i,noPolicy:!n||!i||!(void 0!==r&&r)}},ue=function useEmbedThemeProperties(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=Object(g.c)(function(e){return Object(l.a)({},["embed","configuration","theme"],e)});return e.map(function(e){return t[e]})},me=function useActiveConversation(){var e=Object(g.c)(function(e){return e.conversations}).activeConversation;return Object(g.c)(function(t){return Object(l.a)(null,["conversations","conversations",e,"conversation"],t)})},de=a("uBK8"),fe=a("E8iA"),ge=a("5Fu3"),be=function getRandomTeamMemberId(){var e=ge.a.getState(),t=e.embed,a=void 0===t?{}:t,n=e.session,i=void 0===n?{}:n,r=Object(l.a)([],["configuration","team"],a);if(!r)return null;var c=r.map(function(e){return e.id});return c[Object(ee.f)(c.length,i.sessionStarted)]},pe=function useActiveSenderId(){var e=me(),t=Object(de.a)(),a=Object(fe.a)(),n=ue(["userList","userListMode"]),i=Object(c.a)(n,2),r=i[0],o=void 0===r?[]:r,s=i[1],u=void 0===s?"RANDOM":s,m=Object(g.c)(function(e){return e.embed}).configuration,f=(void 0===m?{}:m).autoAssigneeId,b=Object(d.useMemo)(function(){return Object(l.a)(null,["authorId"],t)},[t]),p=Object(d.useMemo)(function(){return Object(l.a)(null,["attributes","senderId"],a)},[a]),v=Object(d.useMemo)(function(){return Object(l.a)(null,["authorId"],a)},[a]),h=Object(d.useMemo)(function(){return!!Object(l.a)(null,["attributes","automaticSender"],a)},[a])&&!!v,j=function getSenderIdFromConversation(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return t||(e&&e.assigneeId?e.assigneeId:null)}(e,b);return j||(h?v:p?function getWelcomeMessageSenderId(e){return 0===e?be():e}(p):function getSenderIdFromEmbedTheme(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"RANDOM",a=arguments.length>2?arguments[2]:void 0;return a||("RANDOM"===t?be():!e.length||e.includes(null)?be():e.length?e[0]:null)}(o,u,f))},ve=a("8eNW"),he=a("Zyu2"),je=function validateMessageText(e){return e&&e.trim().length>0},Oe=function Composer(e){var t=e.onSubmit,a=e.activeConversationId,n=Object(g.b)(),i=Object(A.useTranslation)().t,r=te(!0),o=Object(d.useRef)(null),u=Object(d.useRef)(null),m=Object(d.useState)(""),b=Object(c.a)(m,2),p=b[0],v=b[1],h=Object(d.useState)(!1),j=Object(c.a)(h,2),y=j[0],w=j[1],k=Object(g.c)(function(e){return e.session.endUser.id}),C=Object(g.c)(function(e){return e.session.endUser.type}),M=Object(g.c)(function(e){return Object(l.a)(!1,["embed","configuration","theme"],e)}).allowEndUserFileUpload,N=Object(g.c)(function(e){return e.embed.configuration}).showBranding,S=void 0!==N&&N,_=!le().noPolicy||S,I=Object(g.c)(function(e){return e.view.matchedHours}),R=Object(d.useRef)(),z=Object(oe.a)().markAsRead,x=pe(),D=Object(g.c)(function(e){return e.view.composerEnabled}),L=Object(d.useCallback)(function(e){n(Object(ve.d)("chat","user","typing:".concat(e),{userId:k,userType:C,conversationId:a,participants:[]}))},[n,k,C,a]),H=Object(d.useMemo)(function(){return Object(E.throttle)(5e3,function(){return L("started")})},[L]),G=Object(d.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,n=a?{}:{sentWelcomeMessage:I,sentOfflineHours:!I};R.current&&(window.clearTimeout(R.current),R.current=null),L("finished"),t({message:Object(P.a)({message:e,activeConversation:a||null,authorId:k,attributes:n})}),v("")},[a,p,t,k,I,L,R]),U=ce({targetKey:"Enter"});Object(d.useEffect)(function(){U&&je(p)&&G()},[U,p,G]),Object(d.useEffect)(function(){a&&function resetMessageText(){v("")}()},[a]);var W=Object(T.a)().activeColor,K=Object(he.a)(x).recipient,V=je(p),Z=Object(d.useMemo)(function(){return D?i("composer.replyToPlaceholder",{name:K.name}):i("composer.replyDisabled")},[K,D,i]);return f.a.createElement("div",{className:s()("drift-widget-composer--default",{"drift-widget-composer--with-branding":_,"drift-widget-composer--mobile":r})},f.a.createElement(ie,null),!r&&f.a.createElement(F,{open:y,onAddEmoji:function onAddEmoji(e){w(!y),v(e),o.current&&o.current.focus()},onClickOutside:function onEmojiPickerClickOutside(e){u.current&&u.current.contains(e.target)||w(!1)}}),f.a.createElement("div",{className:"drift-widget-composer-actions"},!V&&a&&f.a.createElement(ae,{onAddGiphy:G,disabled:!D}),!V&&M&&a&&f.a.createElement(B,{activeConversation:a,onSubmit:t,disabled:!D}),!!V&&f.a.createElement("button",{className:"drift-widget-composer-send-button",onClick:function onClick(){return G()},disabled:!D},f.a.createElement(re.a,{color:"#".concat(W)}))),f.a.createElement("div",{className:"drift-widget-composer--text-area"},f.a.createElement("pre",null,p.length?p:" "),f.a.createElement("textarea",{className:"drift-widget-input",ref:o,placeholder:Z,value:p,onChange:function onTextareaChange(e){U||(v(e.target.value),H(),R.current&&window.clearTimeout(R.current),R.current=window.setTimeout(function(){return L("finished")},5e3))},onFocus:function onFocus(){return z(a)},"aria-label":"message composer",maxLength:4096,disabled:!D}),!r&&f.a.createElement("button",{ref:u,className:"drift-widget-composer-emoji-toggle",onClick:function onEmojiButtonClick(){w(!y)},disabled:!D,"aria-label":"emojis"},f.a.createElement(O,null))))},Ae=(a("PGb/"),a("JhcM"),a("A5mO")),Ee=a("i9gz"),ye=a("j2Ij"),we=a("v7P+"),ke=function useConversationHistoryToggle(){var e=Object(g.b)(),t=Object(g.c)(function(e){return e.view.conversationHistoryOpen});return{onToggleConversationHistory:Object(d.useCallback)(function(t){return e(Object(we.c)({conversationHistoryOpen:t}))},[e]),conversationHistoryOpen:t}},Ce=a("kXeL"),Me=a.n(Ce),Ne=function useUserResolution(){var e=Object(g.c)(function(e){return e.session.endUser});return{id:e.id,name:Object(l.a)("me",["name"],e),avatar:Object(l.a)(Me.a,["socialProfile","avatar"],e),email:Object(l.a)(null,["socialProfile","email"],e)}},Se=a("TbSn"),Te=function useLastMessage(e){var t=Object(g.c)(function(t){return Object(l.a)(null,["conversations","conversations",e,"lastMessage"],t)}),a=Object(g.c)(function(t){var a=Object(l.a)({},["conversations","messages",e],t);if(Object(Ee.a)(a))return{};var n=Object.values(a);return n.length?Object(Se.a)(n):void 0});return t||a||{}},_e=a("HYPW"),Pe=a("417H"),Ie=function ConversationHistoryListItem(e){var t=e.conversation,a=void 0===t?{}:t,n=ke().onToggleConversationHistory,i=Object(g.b)(),r=Ne(),c=Object(d.useMemo)(function(){return Object(l.a)(null,["conversation","id"],a)},[a]),o=Te(c),s=Object(d.useMemo)(function(){return Object(l.a)(null,["authorId"],o)},[o]),u=Object(he.a)(s).recipient,m=Object(Pe.e)(o),b=Object(oe.a)().markAsRead;if(Object(Ee.a)(o))return null;var p=o.createdAt,v=o.attributes,h=void 0===v?{}:v,j=Object(Ae.a)(p).isAfter(Ae.a.today())?Object(Ae.a)(p).unixFmt("h:mm a"):Object(Ae.a)(p).unixFmt("M/d/yyyy");return f.a.createElement("li",{className:"drift-widget-conversation-list-item"},f.a.createElement("button",{onClick:function toggleConversation(e){return function(){c&&(b(c),n(!1),i(Object(_.k)({conversationId:e})),Object(_e.d)(e))}}(a.conversation.id)},f.a.createElement(ye.a,{size:"SMALL",className:"drift-widget-conversation-list-item-avatar",image:m?r.avatar:u.avatarUrl}),f.a.createElement("div",{className:"drift-widget-conversation-list-item-content"},f.a.createElement("h2",null,m?r.name:u.name),f.a.createElement("span",{className:"drift-widget-conversation-list-item-time"},j),f.a.createElement("p",{className:"drift-widget-conversation-list-item-last-message"},h.preview))))},Re=a("JCzi"),ze=function ConversationHistory(){var e=ke().conversationHistoryOpen,t=Object(g.c)(function(e){return e.conversations.conversations}),a=Object(d.useMemo)(function(){return Object(Re.c)(Object(u.a)(t),"updatedAt")},[t]),n=Object(d.useMemo)(function(){return f.a.createElement("ul",{className:"drift-widget-conversation-history-list"},a.map(function(e){return f.a.createElement(Ie,{key:e.conversation.id,conversation:e})}))},[a]);return f.a.createElement("div",{className:s()("drift-widget-conversation-history",{"drift-widget-conversation-history--open":e}),"aria-hidden":!e},e&&n)},xe=(a("2VrW"),a("p0+K"),function Drift(){var e=Object(l.a)("",["context","page","hostname"],Object(g.c)(function(e){return e.session}));return f.a.createElement("a",{href:"https://www.drift.com/powered-by?utm_source=".concat(e,"&utm_medium=web-widget&utm_campaign=widget-referral&utm_version=v2"),className:"drift-widget-power",rel:"noopener noreferrer",target:"_blank",title:"Drift"},f.a.createElement(A.Trans,{i18nKey:"composer.footer.poweredByDrift",components:[f.a.createElement(N.c,{height:12,width:12}),f.a.createElement("span",{className:"drift-widget-power-brand"},"Drift")]}))}),Be=function Footer(){var e=Object(g.c)(function(e){return e.view}).chatOpen,t=Object(g.c)(function(e){return e.embed.configuration}).showBranding,a=void 0!==t&&t,n=le(),i=n.privacyPolicyLink,r=n.privacyPolicyLinkText,c=n.noPolicy;return e?f.a.createElement("div",{className:s()("drift-widget-footer",{"drift-widget-footer--with-branding":a})},a&&f.a.createElement(xe,null),!c&&f.a.createElement("span",{className:"drift-widget-footer-privacy"},f.a.createElement("a",{href:i,rel:"noopener noreferrer",target:"_blank",title:r,className:"drift-widget-footer-privacy--link"},r))):null},De=function usePrevious(e){var t=Object(d.useRef)();return Object(d.useEffect)(function(){t.current=e},[e]),t.current},Le=function showBrandingSelector(e){return e.embed.configuration.showBranding||!1},He=function useHasFooter(){var e=Object(g.c)(Le),t=le().noPolicy;return e||!t},Fe=a("gB0i"),Ge=(a("SwvN"),a("jm9a")),Ue=(a("sZBt"),a("rWtA")),We=a("hX/4"),Ke=(a("Jwn2"),a("wdGO")),Ve=function Button(e){var t=e.children,a=e.className,n=e.invertColors,i=e.invertOnHover,r=Object(We.a)(e,["children","className","invertColors","invertOnHover"]),c=Object(T.a)(),o=c.buttonStyles,l=c.foregroundStyles,u=Object(Ke.a)(),m=u.hoverProps,d=u.isHovered,g=n?l:o,b=n?o:l;return f.a.createElement("button",Object.assign({className:s()("drift-widget-button",Object(Ge.a)({},a,!!a)),style:d&&i?Object(y.a)({},b):Object(y.a)({},g),onTouchStart:ee.k},m,r),t)},Ze=a("PhDg"),qe=(a("oY6K"),function SenderInfo(e){var t=e.senderId,a=e.messageText,n=void 0===a?null:a,i=Object(A.useTranslation)().t,r=Object(g.c)(function(e){return e.embed.configuration.organizationName}),c=Object(he.a)(t).recipient,o=void 0===c?{}:c,s=Object(d.useMemo)(function(){return n||(o.name?r&&r.length&&!Object(Ze.a)(r)?i("header.senderInfo",{name:o.name,orgName:r}):"".concat(o.name):"")},[o,r,n,i]);return f.a.createElement("div",{className:"drift-widget-greeting-agent-header"},f.a.createElement("h1",{className:"drift-widget-greeting-recipient-name"},s),f.a.createElement(ye.a,{id:t}))}),Qe=a("7w11"),Je=function useTrackImpressionOnce(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"LIVE_CHAT",t=Object(d.useState)(!1),a=Object(c.a)(t,2),n=a[0],i=a[1],r=Object(g.c)(function(e){return e.view}).chatOpen;Object(d.useEffect)(function(){r&&!n&&i(Object(Qe.a)(e))},[n,r,e])},Xe=a("ljQm"),Ye=a("tNhX"),$e=function GDPR(e){var t=e.previewRef,a=Object(g.b)(),n=Object(g.c)(function(e){return e.embed.configuration.dataProtection}),c=n.policies,o=n.default,s=Object(g.c)(function(e){return e.embed.configuration}).team,u=void 0===s?[]:s,m=Object(g.c)(function(e){return e.session}).endUser,b=Object(d.useCallback)(function(){return a(Object(we.a)({chatOpen:!1}))},[a]),p=Object(se.c)().locale,v=Object(d.useMemo)(function(){return u.find(function(e){return e.bot})||{}},[u]),h=Object(d.useMemo)(function(){var e=Object(l.a)(null,[p],c);if(e)return e;var t=Object(l.a)(null,["".concat(o)],c);return t||(Object(ee.j)({data:["No locale matched and unable to find default policy: ".concat(t)]}),null)},[p,c,o]);if(Je("GDPR"),!h)return null;var j=function doRecordConsent(e){return Object(r.a)(i.a.mark(function _callee(){return i.a.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,Object(Ye.a)(Xe.b.GDPR_CLICKED,{accepted:e,endUser:m.id}),!e){t.next=5;break}return t.next=5,Object(Ue.b)(m.id,h.message);case 5:a(Object(ve.m)({hasConsent:e})),!e&&b(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.warn(t.t0);case 12:case"end":return t.stop()}},_callee,null,[[0,9]])}))};return f.a.createElement("div",{className:"drift-widget-gdpr-consent drift-widget-greeting"},f.a.createElement(qe,{message:"Data Privacy Bot",senderId:v.id}),f.a.createElement("div",{ref:t},f.a.createElement("div",{className:"drift-widget-greeting-content"},f.a.createElement("p",{className:"drift-widget-gdpr-consent--copy"},h.message)),f.a.createElement("div",{className:"drift-gdpr-actions"},f.a.createElement(Ve,{className:"drift-gdpr-action--allow-consent",onClick:j(!0)},f.a.createElement("span",{className:"drift-gdpr-action--text"},h.giveConsentLabel)),f.a.createElement(Ve,{className:"drift-gdpr-action--deny-consent",onClick:j(!1)},f.a.createElement("span",{className:"drift-gdpr-action--text"},h.declineConsentLabel)))))},et=(a("9Hpm"),a("1od5")),tt=function Time(e){var t=e.height,a=void 0===t?24:t,n=e.width,i=void 0===n?24:n,r=e.fill,c=void 0===r?"#FFF":r;Object(We.a)(e,["height","width","fill"]);return f.a.createElement("svg",{className:"drift-default-icon drift-default-icon--Time",width:i,height:a,viewBox:"0 0 20 20"},f.a.createElement("path",{d:"M3.55,10.3l.79-.78a.77.77,0,0,1,1.09,1.09L3.3,12.74a.79.79,0,0,1-1.11,0l-2-2.13A.77.77,0,1,1,1.33,9.54l.69.73V10a9,9,0,1,1,3.07,6.77.77.77,0,1,1,1-1.16A7.45,7.45,0,1,0,3.56,10C3.56,10.08,3.56,10.18,3.55,10.3Zm7.72-4.93v4.87h3.34a.77.77,0,0,1,0,1.54H10.5A.76.76,0,0,1,9.73,11V5.37a.77.77,0,0,1,1.54,0Z",fill:c}))},at=function ConversationHeader(){var e=Object(A.useTranslation)().t,t=pe(),a=Object(he.a)(t).recipient,n=void 0===a?{}:a,i=Object(g.c)(function(e){return e.conversations.conversations}),r=Object(T.a)(),c=r.backgroundStyles,o=r.textColorStyles,l=r.widgetSecondaryColor,u=te(),m=ke(),d=m.conversationHistoryOpen,b=m.onToggleConversationHistory;return f.a.createElement("div",{className:"drift-widget-active-conversation-header"},f.a.createElement(ye.a,{size:"SMALL",id:n.id}),f.a.createElement("h1",{"aria-hidden":d,className:"drift-widget-recipient-name",style:o},n.name),f.a.createElement("div",{className:s()("drift-widget-conversation-history-header",{"drift-widget-conversation-history-header--open":d}),style:c},f.a.createElement(S.a,{className:"drift-widget-history-back-button",onClick:function onClick(){return b(!d)},"aria-label":"back to conversation"},f.a.createElement(et.a,{color:l,width:20,height:20})),f.a.createElement("h1",{"aria-hidden":!d,style:o},e("history.headerTitle"))),Object.keys(i).length>1&&f.a.createElement(S.a,{className:s()("drift-widget-history",{"drift-widget-history--mobile":u,"drift-widget-history--open":d}),"aria-label":"drift conversation history",onClick:function onClick(){return b(!d)}},f.a.createElement(tt,{fill:l,height:20,width:20})))},nt=a("hm8b"),it=a("NFvl"),rt=function useDefaultGreeting(){var e=Object(A.useTranslation)().t,t=Object(g.c)(function(t){var a=Object(it.a)(["embed","configuration","theme","welcomeMessage"],t);return a||e("greeting.onlineMessage")}),a=Object(g.c)(function(e){return e.view.matchedHours}),n=Object(g.c)(function(t){var a=Object(it.a)(["embed","configuration","theme","awayMessage"],t);return a||e("greeting.awayMessage")});return a?t:n},ct=(a("txDs"),function GreetingMessage(e){var t=e.previewRef,a=rt(),n=pe(),i=Object(g.c)(function(e){return e.view}).chatOpen,r=De(i),c=Object(g.c)(function(e){return e.view.matchedHours});return Object(d.useEffect)(function(){Object(nt.a)(r)||i===r||(c?Object(_e.o)(i):Object(_e.a)(i))},[r,i,c]),Je(),f.a.createElement("div",{className:"drift-widget-greeting"},f.a.createElement(qe,{senderId:n}),f.a.createElement("p",{ref:t,className:"drift-widget-greeting-content"},a))}),ot=(a("Uo75"),a("7rSy")),st=a("cv42"),lt=a("Gi4y"),ut=function WelcomeMessage(e){var t=e.previewRef,a=Object(g.b)(),n=Object(g.c)(function(e){return e.campaigns.activeCampaign}),i=Object(g.c)(function(e){return e.view}).chatOpen,r=pe(),c=Object(st.a)();return Je(),i&&n?f.a.createElement("div",{className:"drift-widget-greeting"},f.a.createElement(qe,{senderId:r}),f.a.createElement("div",{ref:t,className:"drift-widget-welcome-message-content"},f.a.createElement("div",{dangerouslySetInnerHTML:{__html:'\n              <div class="drift-welcome-message-content--body">\n                '.concat(n.body,"\n              </div>\n            ")}})),c.ctaCopy&&"CHAT_RESPONSE"!==c.ctaType&&f.a.createElement("div",{className:"drift-widget-greeting-cta-wrapper"},f.a.createElement(ot.a,{ctaUrl:c.ctaUrl,ctaType:c.ctaType,ctaCopy:c.ctaCopy,campaignMessage:n,onClick:function onClick(){return a(Object(lt.a)())}}))):null},mt="GREETING",dt="CONVERSATION",ft="GDPR",gt="WELCOME_MESSAGE",bt=(G={},Object(Ge.a)(G,gt,function(e){return f.a.createElement(ut,e)}),Object(Ge.a)(G,mt,function(e){return f.a.createElement(ct,e)}),Object(Ge.a)(G,dt,function(e){return f.a.createElement(at,e)}),Object(Ge.a)(G,ft,function(e){return f.a.createElement($e,e)}),G),pt=a("P6UB"),vt=function useSetPreviewHeight(){var e=Object(d.useRef)(null),t=Object(g.c)(function(e){return!!e.conversations.activeConversation}),a=Object(g.c)(function(e){return e.embed.configuration}).showBranding,n=void 0!==a&&a,c=le().noPolicy,o=Object(g.c)(function(e){return e.session.gdpr}).hasConsent;return{setChatHeight:Object(d.useCallback)(function(){var a=Object(r.a)(i.a.mark(function _callee(a){var r,s,l,u,m,d=arguments;return i.a.wrap(function _callee$(i){for(;;)switch(i.prev=i.next){case 0:if(r=d.length>1&&void 0!==d[1]&&d[1],!t||!o){i.next=3;break}return i.abrupt("return");case 3:l=0,(s=!n&&c)&&(l+=18),o||(l+=s?8:3),u=e.current?e.current.clientHeight:200,m=a?"".concat(u+155-l,"px"):"0px",Object(pt.a)({topic:"set-frame-height",message:{height:m,name:"chat",transition:!0,transitionHeight:r}});case 10:case"end":return i.stop()}},_callee)}));return function(e){return a.apply(this,arguments)}}(),[e,t,n,c,o]),previewRef:e}},ht=function HeaderLayout(e){var t=e.activeConversation,a=e.chatHidden,n=Object(g.b)(),i=Object(T.a)().backgroundStyles,r=Object(g.c)(function(e){return e.campaigns.activeCampaign}),o=Object(g.c)(function(e){return e.session.gdpr}).hasConsent,l=te(),u=vt(),m=u.setChatHeight,b=u.previewRef,p=Object(g.c)(function(e){return e.view}).chatOpen,v=Object(d.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t;return arguments.length>1&&void 0!==arguments[1]&&arguments[1],o?e?dt:r?gt:mt:ft},[t,o,r]),h=Object(d.useState)(v()),j=Object(c.a)(h,2),O=j[0],A=j[1],E=De(O),y=O!==E;Object(d.useLayoutEffect)(function(){p&&!a&&m(p,y)},[p,a,m,y]),Object(d.useEffect)(function(){var e=v(t);e!==O&&A(e)},[t,r,o,v,O]);var w=bt[O];return f.a.createElement("header",{className:s()("drift-widget-header",{"drift-widget-header--collapsed":O!==dt})},f.a.createElement("div",{className:"drift-widget-header-top-line",style:i}),f.a.createElement("div",{className:"drift-widget-header--content"},f.a.createElement(w,{previewRef:b})),l&&f.a.createElement(S.a,{onClick:function doToggleChat(){n(Object(we.a)({chatOpen:!1}))},className:"drift-widget-mobile-close","aria-label":"close"},f.a.createElement(N.k,{width:16,height:16})))},jt=a("efpO"),Ot=a("oCA+"),At=a("voTE"),Et=a("mfas"),yt=a("XuDI"),wt=a("LpSY"),kt=(a("UwV1"),function AgentRequestedOptions(e){var t=e.message,a=(e.resolveMessageHeight,t.attributes),n=t.id,i=t.conversationId,r=Object(g.b)(),c=Object(g.c)(function(e){return e.session}).endUser,o=Te(i),s=function doSendMessage(e){return function(){var a=Object(P.a)({message:e,activeConversation:i,author:c.id,attributes:{buttonClicked:!0,questionId:t.attributes.questionId}});r(Object(_.j)({message:a}))}};return o.id===n&&t.attributes.buttons?f.a.createElement("ul",{className:"drift-widget-message-group drift-widget-message-group-type--END_USER"},f.a.createElement("li",{className:"drift-widget-message drift-widget-message-sender--END_USER"},f.a.createElement("div",{className:"drift-bot-buttons--set"},a.buttons.map(function(e,t){return f.a.createElement(Ve,{onClick:s(e.value),key:"bot-button-".concat(n,"-").concat(t),invertOnHover:!0},e.label)})))):null}),Ct=a("WwEg"),Mt=(a("ZP32"),function Retry(e){var t=e.height,a=void 0===t?24:t,n=e.width,i=void 0===n?24:n;Object(We.a)(e,["height","width"]);return f.a.createElement("svg",{className:"drift-default-icon drift-default-icon--retry",width:i,height:a,viewBox:"0 0 28 24"},f.a.createElement("path",{d:"M27.82 19.074c-0.17 0.085-0.353 0.126-0.53 0.126-0.436 0-0.854-0.244-1.063-0.664l-0.994-2.010c-1.762 4.469-5.996 7.474-11.002 7.474-5.438 0-10.298-3.548-11.82-8.628-0.19-0.635 0.164-1.304 0.792-1.496 0.624-0.193 1.29 0.166 1.48 0.8 1.222 4.076 5.148 6.924 9.548 6.924 4.128 0 7.481-2.436 8.838-6.126l-2.372 1.199c-0.588 0.298-1.3 0.056-1.592-0.536s-0.055-1.313 0.53-1.609l4.748-2.401c0.589-0.296 1.301-0.055 1.594 0.538l2.374 4.8c0.294 0.593 0.055 1.314-0.53 1.61zM25.259 10.126c-0.626 0.191-1.291-0.167-1.481-0.802-1.223-4.076-5.148-6.924-9.547-6.924-4.132 0-7.486 2.437-8.842 6.127l2.375-1.201c0.588-0.296 1.301-0.055 1.592 0.538 0.294 0.593 0.056 1.314-0.53 1.61l-4.748 2.399c-0.17 0.086-0.352 0.127-0.529 0.127-0.437 0-0.856-0.242-1.063-0.662l-2.375-4.801c-0.293-0.593-0.055-1.314 0.532-1.61 0.589-0.296 1.3-0.055 1.592 0.538l0.994 2.008c1.759-4.468 5.994-7.471 11.003-7.471 5.436 0 10.296 3.548 11.819 8.628 0.191 0.635-0.164 1.304-0.791 1.498z"}))}),Nt=function MessageFooter(e){var t=e.message,a=e.isLastGroup,n=e.isLastMessage,i=e.delivered,r=e.generated,o=e.messageTimedOut,l=e.deliveryFailed,u=e.resolveMessageHeight,m=Object(A.useTranslation)().t,g=Object(d.useState)(!1),b=Object(c.a)(g,2),p=b[0],v=b[1];return Object(d.useEffect)(function(){(o||i)&&Object(ee.d)(function(){return v(!1)},500),i||p||v(!0)},[i,o,p]),Object(d.useLayoutEffect)(function(){u()},[u,i,p,a,n,l]),!i||p?f.a.createElement("li",{key:"".concat(r,"-message-status"),className:s()("drift-widget-message drift-widget-message--meta-date drift-no-op",{"drift-widget-message-failed-status":l})},f.a.createElement("span",{className:"drift-widget-message--meta-status"},!p&&l?m("status.sendMessageFailed"):f.a.createElement(wt.a,{size:"small",className:"drift-widget-message--meta-status__sending"}))):a||i?n&&a?f.a.createElement("li",{key:"".concat(t.createdAt,"-message-status"),className:"drift-widget-message--meta-date drift-widget-message"},f.a.createElement("div",{className:"drift-widget-message--meta-status"},f.a.createElement(N.j,{className:"drift-widget-message-sent",height:10,width:12}),f.a.createElement("span",{className:"drift-widget-message--meta-date-stamp"},Object(Ae.a)(i).unixFmt("h:mm a")))):null:f.a.createElement("li",{key:"".concat(r,"-message-status"),className:"drift-widget-message drift-widget-message--meta-date drift-no-op"})},St=a("3atR"),Tt=a("S5C5"),_t=(a("Wkzb"),/(\s|^)(http:\/\/www\.|https:\/\/www\.|http:\/\/|https:\/\/){1}[a-z0-9]+([-.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/\S*)?/gm),Pt=/src\s*=\s*"(.+?)"/g,It=function HtmlMessage(e){var t=e.body,a=e.style,n=void 0===a?{}:a,i=e.resolveMessageHeight,r=void 0===i?function(){}:i,c=e.className;if(Object(d.useLayoutEffect)(function(){r()},[r,t]),Object(Pe.d)(t))return null;var o=t.match(Pt)||[],l=t.replace(_t,function(e,t){return"".concat(t,'<a href="').concat(e.trim(),'" target="_blank" rel="noopener noreferrer">').concat(e.trim(),"</a>")}).replace(/<img .*?>/g,"");return f.a.createElement("div",{className:s()("drift-widget-message--box drift-widget-message--HTML",c),style:n},f.a.createElement("div",{dangerouslySetInnerHTML:{__html:l}}),o&&o.map(function(e,t){return f.a.createElement("img",{key:"drift-html-message-".concat(e,"-").concat(t),alt:"drift message",onLoad:r,src:e.replace('"',"").replace("src=","").replace('"',"")})}))},Rt=function BotMessage(e){var t=e.body;return Object(Pe.d)(t)?null:f.a.createElement(f.a.Fragment,null,f.a.createElement(It,{body:t,className:"drift-widget-message--bot"}))},zt=function DefaultMessage(e){var t=e.body;return f.a.createElement("div",{className:"drift-widget-message--box drift-widget-message--STRING"},t)},xt=(a("n/d+"),function EmailSuccess(e){e.height,e.width;return f.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},f.a.createElement("path",{fill:"#0076FF",fillRule:"nonzero",d:"M21 24H3c-1.654 0-3-1.403-3-3.13V10.435c0-.009.004-.016.005-.024.002-.08.026-.156.045-.233.006-.03.008-.058.017-.087l.007-.013a1.02 1.02 0 0 1 .092-.186c.02-.037.03-.078.056-.113.011-.014.028-.02.04-.034.006-.006.014-.01.019-.017.019-.02.026-.047.046-.065l3.276-3.108a.97.97 0 0 1 1.413.07 1.075 1.075 0 0 1-.068 1.473l-2.412 2.289 5.73 4.823 2.71-2.317a1.604 1.604 0 0 1 2.04-.008l2.718 2.325 5.729-4.822-2.39-2.269a1.076 1.076 0 0 1-.07-1.473.971.971 0 0 1 1.413-.071l3.256 3.088c.02.018.028.044.045.064.007.007.014.01.02.018.013.014.03.02.04.034.028.036.037.077.058.114.036.06.068.12.091.184l.007.014c.01.03.012.061.019.092.018.075.04.15.043.227.001.008.005.016.005.025V20.87c0 1.727-1.346 3.13-3 3.13zM1.95 12.575v8.032l4.736-4.047-4.735-3.985zM12 14.715l-8.422 7.198h16.844L12 14.715zm10.142-2.217l-4.827 4.062 4.827 4.126v-8.188zM7.775 4.38l3.363 3.48L17.402.361a.987.987 0 0 1 1.424-.108c.422.376.47 1.035.105 1.471l-6.975 8.348a.988.988 0 0 1-1.478.056L6.347 5.855a1.068 1.068 0 0 1 0-1.476.987.987 0 0 1 1.428.001z"}))}),Bt=a("+RM2"),Dt=function createConversationEvent(e,t){switch(e){case"LEAD_CAPTURED":return Lt(t)}},Lt=function createLeadCaptureConversationEvent(e){if(!e.email||!e.conversationId)return null;var t={conversationId:e.conversationId,type:"LEAD_CAPTURED",email:e.email,leadCapture:{email:e.email,integrations:{},context:Ht()}};Object(b.f)(t)},Ht=function _hydrateConversationEventContext(){var e=ge.a.getState().session,t=(void 0===e?{}:e).context||{},a=t.userAgent,n=t.locale,i=t.timezone,r=t.page;return{page:void 0===r?{}:r,locale:n,timezone:i,userAgent:a}},Ft=function SuccessCapture(){var e=Object(A.useTranslation)().t;return f.a.createElement("div",{className:"drift-widget-offline-email-input-wrapper drift-widget-email-success"},f.a.createElement(xt,null),f.a.createElement("p",{className:"drift-widget-success-message"},e("automessage.emailCapturedSuccess")))},Gt=function EmailCaptureMessage(){var e=Object(A.useTranslation)().t,t=Object(g.b)(),a=Object($.a)(""),n=Object(g.c)(function(e){return e.session}).endUser,c=!!n.email&&!Object(Ee.a)(n.email),o=Object(g.c)(function(e){return e.conversations}).activeConversation,s=Object(g.c)(function(e){return Object(it.a)(["embed","configuration","theme","emailCaptureMessage"],e)}),l=Object(d.useMemo)(function(){return s&&!Object(Ee.a)(s)?s:e("automessage.emailCaptureMessage")},[s,e]),u=function(){var e=Object(r.a)(i.a.mark(function _callee(e){return i.a.wrap(function _callee$(n){for(;;)switch(n.prev=n.next){case 0:e.preventDefault(),Object(Bt.b)({email:a.value}),t(Object(ve.i)({endUser:{email:a.value}})),Dt("LEAD_CAPTURED",{email:a.value,conversationId:o});case 4:case"end":return n.stop()}},_callee)}));return function submitEmail(t){return e.apply(this,arguments)}}(),m=e("form.label.emailAddress");return f.a.createElement(f.a.Fragment,null,f.a.createElement(It,{body:l}),c?f.a.createElement(Ft,null):f.a.createElement("form",{className:"drift-widget-offline-email-capture",onSubmit:u},f.a.createElement("label",{htmlFor:"drift-widget-offline-email-capture-input",className:"drift-widget-offline-email-capture-label"},f.a.createElement("span",null,m,":"),f.a.createElement("fieldset",null,f.a.createElement("div",{className:"drift-widget-offline-email-capture-input-container"},f.a.createElement("input",Object.assign({id:"drift-widget-offline-email-capture-input",type:"email",placeholder:m},a,{required:!0}))),f.a.createElement(Ve,{className:"drift-widget-offline-email-button",invertColors:!0,type:"submit"},e("form.label.submit"))))))},Ut=function getMeetingRecipientAgentId(e){return Object(l.a)(null,["attributes","presentSchedule"],e)||Object(l.a)(null,["attributes","scheduleMeetingWith"],e)},Wt=function useMeetingMessageInfo(e){var t=Object(g.c)(function(t){var a=t.conversations.activeConversation;return t.conversations.messages[a][e]});return Object(d.useMemo)(function(){return{shouldPresentSchedulingCard:!!Object(l.a)(null,["attributes","presentSchedule"],t),shouldPresentConfirmationCard:!!Object(l.a)(null,["attributes","appointmentInfo"],t),additionalAgents:Object(l.a)([],["attributes","additionalAgents"],t)||Object(l.a)([],["attributes","appointmentInfo","additionalAgents"],t),meetingRecipientAgentId:Ut(t),meetingType:Object(l.a)(null,["attributes","meetingType"],t),meetingSource:Object(l.a)(null,["attributes","meetingSource"],t),schedulingAgentId:Object(l.a)(null,["attributes","bookedByUserId"],t)||Object(l.a)(null,["attributes","offerSchedule"],t),appointmentInfo:Object(l.a)(null,["attributes","appointmentInfo"],t)}},[t])},Kt=(a("fmuz"),a("JBtm")),Vt=a.n(Kt),Zt=function fetchAgentAvailability(e){var t=e.agentId,a=e.additionalAgents,n=void 0===a?[]:a,i=e.meetingType,r=e.start;return k.m.get("scheduling/".concat(t,"/availability"),{params:{meetingType:i,start:r,additionalAgents:Object(Ct.a)(n)},paramsSerializer:function paramsSerializer(e){return Vt.a.stringify(e)}})},qt=function scheduleMeeting(e){var t=e.endUserTimeZone,a=e.availabilitySlot,n=e.agentId,i=e.meetingType,r=e.meetingSource,c=e.conversationId,o=e.bookedByUserId;return k.m.post("scheduling/".concat(n,"/schedule"),a,{params:{conversationId:c,meetingSource:r,meetingType:i,timeZone:t,bookedByUserId:o}})},Qt=(a("Q0X4"),function LoadingDots(){return f.a.createElement("div",{className:"widget-loading-dots"},f.a.createElement("span",{className:"widget-loading-dot widget-loading-dot-delay-1"},"."),f.a.createElement("span",{className:"widget-loading-dot widget-loading-dot-delay-2"},"."),f.a.createElement("span",{className:"widget-loading-dot widget-loading-dot-delay-3"},"."))}),Jt=function translateErrorMessage(e){if(!e||!e.message)return"meeting.scheduleAMeetingError";switch(e.message){case"The requested slot cannot be in the past":return"meeting.scheduleAMeetingTimePassedError";case"The requested slot does not fall within agent-configured availability":case"The requested slot does not respect the agent-configured minimum notice time":case"The requested slot--padded by buffer time on both sides--conflicts with an existing event":case"The requested slot--padded by buffer time on both sides--conflicts with an existing point-in-time event":return"meeting.scheduleAMeetingAlreadyBookedError";default:return"meeting.scheduleAMeetingError"}},Xt=function getTimeZoneGroupI18nKey(e){return"tz.group.".concat(e)},Yt=function getTimeZoneI18nKey(e){return"tz.".concat(e)},$t=function(){var e=Object(r.a)(i.a.mark(function _callee(){var e,t,a,n,r=arguments;return i.a.wrap(function _callee$(i){for(;;)switch(i.prev=i.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:"",i.next=3,Object(pt.a)({topic:"access-host-window",message:{key:"location"}});case 3:return t=i.sent,a=t.data,n=void 0===a?{}:a,i.abrupt("return","https://drift.com?utm_source=".concat(n.host,"&utm_medium=web-widget&utm_campaign=widget-referral&utm_content=").concat(e));case 7:case"end":return i.stop()}},_callee)}));return function getDriftUrl(){return e.apply(this,arguments)}}(),ea=function MeetingRecipients(e){var t=e.primaryRecipientId,a=e.additionalRecipientIds,n=void 0===a?[]:a,i=Object(A.useTranslation)().t,r=Object(he.a)(t).recipient,c=n.length?i("meeting.recipients",{name:r.name,others:n.length}):"".concat(r.name);return f.a.createElement("div",{className:"drift-meeting-recipients"},f.a.createElement("div",{className:"drift-meeting-scheduler--avatar"},[t].concat(Object(Ct.a)(n)).map(function(e,t){return f.a.createElement(ye.a,{size:"SMALL",id:e,key:"agent-avatar-".concat(t)})})),f.a.createElement("p",{className:"drift-meeting-recipient-name"},c))},ta=function MeetingConfirmation(e){var t=e.meetingTime,a=e.meetingAgentId,n=e.additionalAgents,o=e.meetingDuration,s=e.timezone,l=e.onBackClicked,u=e.onConfirmClicked,m=e.isBookingPending,g=e.resolveMessageHeight,b=e.isConfirmed,p=void 0!==b&&b,v=Object(A.useTranslation)(),h=v.t,j=v.i18n,O=Object(Ae.a)(t).format("{month} {".concat("en"===j.lang?"date-ordinal":"date","}, {year}")),E=Object(Ae.a)(t).format("time"),y=Object(Ae.a)(t).add(o,"minute").format("time"),w=Object(d.useState)(""),k=Object(c.a)(w,2),C=k[0],M=k[1];return Object(d.useEffect)(function(){!function(){var e=Object(r.a)(i.a.mark(function _callee(){var e;return i.a.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,$t("scheduling-card");case 3:e=t.sent,M(e),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.warn("Failed to get referral URL: ".concat(t.t0));case 10:case"end":return t.stop()}},_callee,null,[[0,7]])}));return function getDriftReferralUrl(){return e.apply(this,arguments)}}()()},[]),Object(d.useEffect)(g,[m,p]),m?f.a.createElement("div",{className:"drift-meeting-card-body"},f.a.createElement(Qt,null)):f.a.createElement("div",{className:"drift-meeting-card-body"},!p&&f.a.createElement(S.a,{className:"drift-meeting-back-button",onClick:l,"aria-label":"back"},f.a.createElement(N.b,null)),f.a.createElement(ea,{primaryRecipientId:a,additionalRecipientIds:n}),f.a.createElement("span",{className:"drift-meeting-confirmation--time"},E," - ",y),f.a.createElement("span",null,O),f.a.createElement("span",{className:"drift-meeting-confirmation--timezone"},s),!p&&f.a.createElement(Ve,{className:"drift-meeting-confirmation__confirm",onClick:u,invertColors:!0,invertOnHover:!0},h("meeting.schedule")),p&&f.a.createElement("div",{className:"drift-meeting-confirmed-text"},f.a.createElement("a",{href:C},f.a.createElement(A.Trans,{i18nKey:"composer.footer.meetingPoweredByDrift",components:[f.a.createElement(N.c,{height:12,width:12})]}))))},aa=function MeetingSlotListItem(e){var t=e.meetingSlot,a=e.onItemClicked,n=Object(Ke.a)(),i=n.hoverProps,r=n.isHovered,c=Object(T.a)(),o=c.borderStyles,s=c.primaryTextColor;return f.a.createElement("li",Object.assign({className:"drift-meeting-day-picker--list-item"},i,{style:r?Object(y.a)({},o):{}}),f.a.createElement(S.a,{onClick:a},f.a.createElement("span",{style:r?Object(y.a)({},s):{}},t.day),f.a.createElement("span",{style:r?Object(y.a)({},s):{}},t.date)))},na=function MeetingDayPicker(e){var t=e.timezone,a=e.meetingInfo,n=e.meetingSlotSets,i=e.onMeetingDateChosen,r=e.onTimezoneLinkClick,o=e.resolveMessageHeight,s=Object(A.useTranslation)().t,l=Object(d.useState)(0),u=Object(c.a)(l,2),m=u[0],g=u[1],b=Object(d.useCallback)(function(){m!==n.length&&g(m+1)},[m,n]),p=Object(d.useCallback)(function(){m>0&&g(m-1)},[m]),v=ce({targetKey:"ArrowRight"}),h=ce({targetKey:"ArrowLeft"}),j=Object(T.a)().primaryTextColor;return Object(d.useEffect)(function(){v&&b(),h&&p()},[v,h,p,b]),Object(d.useEffect)(o,[n]),Object(nt.a)(n)?null:f.a.createElement("div",{className:"drift-meeting-day-picker"},f.a.createElement(ea,{primaryRecipientId:a.meetingRecipientAgentId,additionalRecipientIds:a.additionalAgents}),f.a.createElement("div",{className:"drift-meeting-day-picker--timezone"},f.a.createElement("span",null,s("meeting.selectADay")),f.a.createElement(S.a,{onClick:r,style:j},"(",t.name,")")),f.a.createElement("ul",{className:"drift-meeting-day-picker--slots"},n[m].map(function(e,t){return f.a.createElement(aa,{key:"meeting-slot-".concat(t),meetingSlot:e,onItemClicked:function onItemClicked(){return i(e)}})})),f.a.createElement("div",{className:"drift-meeting-day-picker--slot-nav"},m>0&&f.a.createElement(S.a,{className:"drift-meeting-day-picker--slot-prev",onClick:function onClick(){return p()},style:j},s("meeting.prev")),m!==n.length-1&&f.a.createElement(S.a,{className:"drift-meeting-day-picker--slot-next",onClick:function onClick(){return b()},style:j},s("meeting.next"))))},ia=function MeetingError(e){var t=e.message,a=e.onRetryClicked,n=Object(A.useTranslation)().t;return f.a.createElement("div",{className:"drift-meeting-error"},f.a.createElement(N.d,null),f.a.createElement("div",{className:"drift-meeting-error-message"},f.a.createElement("span",null,t)),f.a.createElement(Ve,{onClick:a},n("meeting.chooseNewTime")))},ra=function MeetingSchedulerHeader(e){var t=e.duration,a=e.children,n=Object(A.useTranslation)().t,i=Object(T.a)().backgroundStyles;return f.a.createElement("div",{className:"drift-meeting-scheduler"},f.a.createElement("header",{className:"drift-meeting-scheduler--header",style:i},f.a.createElement("span",null,f.a.createElement(N.e,{width:17,height:17}),n("meeting.scheduleAMeeting")),t&&f.a.createElement("span",null,n("meeting.duration",{duration:t}))),a)},ca=a("KwHb"),oa=function MeetingTimeSlot(e){var t=e.onMeetingTimeChosen,a=e.index,n=e.timeSlot,i=e.timezone,r=Object(Ke.a)(),c=r.hoverProps,o=r.isHovered,s=Object(T.a)(),l=s.borderStyles,u=s.primaryTextColor;return f.a.createElement("li",Object.assign({className:"drift-meeting-time-picker--slot",key:"slot-".concat(a)},c,{style:o?Object(y.a)({},l):{}}),f.a.createElement(S.a,{onClick:function onClick(){return t(n)}},f.a.createElement("span",{style:o?Object(y.a)({},u):{}},Object(Ae.a)(n,i.value).format("time"))))},sa=function MeetingTimePicker(e){var t=e.timezone,a=e.meetingSlot,n=e.onBackClicked,i=e.onMeetingTimeChosen,r=e.onTimezoneLinkClick,o=e.resolveMessageHeight,s=Object(A.useTranslation)().t,l=Object(d.useState)(0),u=Object(c.a)(l,2),m=u[0],g=u[1],b=Object(ca.a)(6,a.slots),p=Object(d.useCallback)(function(){m!==b.length-1&&g(m+1)},[m,b]),v=Object(d.useCallback)(function(){m>0&&g(m-1)},[m]),h=ce({targetKey:"ArrowRight"}),j=ce({targetKey:"ArrowLeft"}),O=Object(T.a)().primaryTextColor;return Object(d.useEffect)(function(){h&&p(),j&&v()},[h,j,p,v]),Object(d.useEffect)(o,[m]),f.a.createElement("div",{className:"drift-meeting-time-picker"},f.a.createElement("header",{className:"drift-meeting-time-picker--header"},f.a.createElement(S.a,{className:"drift-meeting-back-button",onClick:n,"aria-label":"back"},f.a.createElement(N.b,null)),f.a.createElement("span",{className:"drift-meeting-time-picker--header-day"},a.day," ",a.date)),f.a.createElement("div",{className:"drift-meeting-day-picker--timezone"},f.a.createElement("span",null,s("meeting.selectATime")),f.a.createElement(S.a,{onClick:r,style:O},"(",t.name,")")),f.a.createElement("ul",{className:"drift-meeting-time-picker--timeslots"},b[m].map(function(e,a){return f.a.createElement(oa,{key:"drift-meeting-time-slot-".concat(a),onMeetingTimeChosen:i,index:a,timeSlot:e,timezone:t})})),f.a.createElement("div",{className:"drift-meeting-day-picker--slot-nav"},m>0&&f.a.createElement(S.a,{className:"drift-meeting-day-picker--slot-prev",onClick:function onClick(){return v()},style:O},s("meeting.prev")),m!==b.length-1&&f.a.createElement(S.a,{className:"drift-meeting-day-picker--slot-next",onClick:function onClick(){return p()},style:O},s("meeting.next"))))},la=a("oxCZ"),ua=a.n(la),ma=[{group:"us",zones:["America/Puerto_Rico","America/New_York","America/Chicago","America/Denver","America/Phoenix","America/Los_Angeles","America/Anchorage","Pacific/Honolulu"]},{group:"america",zones:["America/Adak","America/Anchorage","America/Anguilla","America/Antigua","America/Araguaina","America/Argentina/Buenos_Aires","America/Argentina/Catamarca","America/Argentina/ComodRivadavia","America/Argentina/Cordoba","America/Argentina/Jujuy","America/Argentina/La_Rioja","America/Argentina/Mendoza","America/Argentina/Rio_Gallegos","America/Argentina/Salta","America/Argentina/San_Juan","America/Argentina/San_Luis","America/Argentina/Tucuman","America/Argentina/Ushuaia","America/Aruba","America/Asuncion","America/Atikokan","America/Atka","America/Bahia","America/Barbados","America/Belem","America/Belize","America/Blanc-Sablon","America/Boa_Vista","America/Bogota","America/Boise","America/Buenos_Aires","America/Cambridge_Bay","America/Campo_Grande","America/Cancun","America/Caracas","America/Catamarca","America/Cayenne","America/Cayman","America/Chicago","America/Chihuahua","America/Coral_Harbour","America/Cordoba","America/Costa_Rica","America/Cuiaba","America/Curacao","America/Danmarkshavn","America/Dawson","America/Dawson_Creek","America/Denver","America/Detroit","America/Dominica","America/Edmonton","America/Eirunepe","America/El_Salvador","America/Ensenada","America/Fortaleza","America/Fort_Wayne","America/Glace_Bay","America/Godthab","America/Goose_Bay","America/Grand_Turk","America/Grenada","America/Guadeloupe","America/Guatemala","America/Guayaquil","America/Guyana","America/Halifax","America/Havana","America/Hermosillo","America/Indiana/Indianapolis","America/Indiana/Knox","America/Indiana/Marengo","America/Indiana/Petersburg","America/Indiana/Tell_City","America/Indiana/Vevay","America/Indiana/Vincennes","America/Indiana/Winamac","America/Indianapolis","America/Inuvik","America/Iqaluit","America/Jamaica","America/Jujuy","America/Juneau","America/Kentucky/Louisville","America/Kentucky/Monticello","America/Knox_IN","America/La_Paz","America/Lima","America/Los_Angeles","America/Louisville","America/Maceio","America/Managua","America/Manaus","America/Marigot","America/Martinique","America/Matamoros","America/Mazatlan","America/Mendoza","America/Menominee","America/Merida","America/Mexico_City","America/Miquelon","America/Moncton","America/Monterrey","America/Montevideo","America/Montreal","America/Montserrat","America/Nassau","America/New_York","America/Nipigon","America/Nome","America/Noronha","America/North_Dakota/Center","America/North_Dakota/New_Salem","America/Ojinaga","America/Panama","America/Pangnirtung","America/Paramaribo","America/Phoenix","America/Port-au-Prince","America/Porto_Acre","America/Port_of_Spain","America/Porto_Velho","America/Puerto_Rico","America/Rainy_River","America/Rankin_Inlet","America/Recife","America/Regina","America/Resolute","America/Rio_Branco","America/Rosario","America/Santa_Isabel","America/Santarem","America/Santiago","America/Santo_Domingo","America/Sao_Paulo","America/Scoresbysund","America/Shiprock","America/St_Barthelemy","America/St_Johns","America/St_Kitts","America/St_Lucia","America/St_Thomas","America/St_Vincent","America/Swift_Current","America/Tegucigalpa","America/Thule","America/Thunder_Bay","America/Tijuana","America/Toronto","America/Tortola","America/Vancouver","America/Virgin","America/Whitehorse","America/Winnipeg","America/Yakutat","America/Yellowknife","US/Eastern"]},{group:"europe",zones:["Europe/Amsterdam","Europe/Andorra","Europe/Athens","Europe/Belfast","Europe/Belgrade","Europe/Berlin","Europe/Bratislava","Europe/Brussels","Europe/Bucharest","Europe/Budapest","Europe/Chisinau","Europe/Copenhagen","Europe/Dublin","Europe/Gibraltar","Europe/Guernsey","Europe/Helsinki","Europe/Isle_of_Man","Europe/Istanbul","Europe/Jersey","Europe/Kaliningrad","Europe/Kiev","Europe/Lisbon","Europe/Ljubljana","Europe/London","Europe/Luxembourg","Europe/Madrid","Europe/Malta","Europe/Mariehamn","Europe/Minsk","Europe/Monaco","Europe/Moscow","Europe/Nicosia","Europe/Oslo","Europe/Paris","Europe/Podgorica","Europe/Prague","Europe/Riga","Europe/Rome","Europe/Samara","Europe/San_Marino","Europe/Sarajevo","Europe/Simferopol","Europe/Skopje","Europe/Sofia","Europe/Stockholm","Europe/Tallinn","Europe/Tirane","Europe/Tiraspol","Europe/Uzhgorod","Europe/Vaduz","Europe/Vatican","Europe/Vienna","Europe/Vilnius","Europe/Volgograd","Europe/Warsaw","Europe/Zagreb","Europe/Zaporozhye","Europe/Zurich"]},{group:"asia",zones:["Asia/Aden","Asia/Almaty","Asia/Amman","Asia/Anadyr","Asia/Aqtau","Asia/Aqtobe","Asia/Ashgabat","Asia/Ashkhabad","Asia/Baghdad","Asia/Bahrain","Asia/Baku","Asia/Bangkok","Asia/Beirut","Asia/Bishkek","Asia/Brunei","Asia/Calcutta","Asia/Choibalsan","Asia/Chongqing","Asia/Chungking","Asia/Colombo","Asia/Dacca","Asia/Damascus","Asia/Dhaka","Asia/Dili","Asia/Dubai","Asia/Dushanbe","Asia/Gaza","Asia/Harbin","Asia/Ho_Chi_Minh","Asia/Hong_Kong","Asia/Hovd","Asia/Irkutsk","Asia/Istanbul","Asia/Jakarta","Asia/Jayapura","Asia/Jerusalem","Asia/Kabul","Asia/Kamchatka","Asia/Karachi","Asia/Kashgar","Asia/Kathmandu","Asia/Katmandu","Asia/Kolkata","Asia/Krasnoyarsk","Asia/Kuala_Lumpur","Asia/Kuching","Asia/Kuwait","Asia/Macao","Asia/Macau","Asia/Magadan","Asia/Makassar","Asia/Manila","Asia/Muscat","Asia/Nicosia","Asia/Novokuznetsk","Asia/Novosibirsk","Asia/Omsk","Asia/Oral","Asia/Phnom_Penh","Asia/Pontianak","Asia/Pyongyang","Asia/Qatar","Asia/Qyzylorda","Asia/Rangoon","Asia/Riyadh","Asia/Saigon","Asia/Sakhalin","Asia/Samarkand","Asia/Seoul","Asia/Shanghai","Asia/Singapore","Asia/Taipei","Asia/Tashkent","Asia/Tbilisi","Asia/Tehran","Asia/Tel_Aviv","Asia/Thimbu","Asia/Thimphu","Asia/Tokyo","Asia/Ujung_Pandang","Asia/Ulaanbaatar","Asia/Ulan_Bator","Asia/Urumqi","Asia/Vientiane","Asia/Vladivostok","Asia/Yakutsk","Asia/Yekaterinburg","Asia/Yerevan"]},{group:"africa",zones:["Africa/Abidjan","Africa/Accra","Africa/Addis_Ababa","Africa/Algiers","Africa/Asmara","Africa/Asmera","Africa/Bamako","Africa/Bangui","Africa/Banjul","Africa/Bissau","Africa/Blantyre","Africa/Brazzaville","Africa/Bujumbura","Africa/Cairo","Africa/Casablanca","Africa/Ceuta","Africa/Conakry","Africa/Dakar","Africa/Dar_es_Salaam","Africa/Djibouti","Africa/Douala","Africa/El_Aaiun","Africa/Freetown","Africa/Gaborone","Africa/Harare","Africa/Johannesburg","Africa/Kampala","Africa/Khartoum","Africa/Kigali","Africa/Kinshasa","Africa/Lagos","Africa/Libreville","Africa/Lome","Africa/Luanda","Africa/Lubumbashi","Africa/Lusaka","Africa/Malabo","Africa/Maputo","Africa/Maseru","Africa/Mbabane","Africa/Mogadishu","Africa/Monrovia","Africa/Nairobi","Africa/Ndjamena","Africa/Niamey","Africa/Nouakchott","Africa/Ouagadougou","Africa/Porto-Novo","Africa/Sao_Tome","Africa/Timbuktu","Africa/Tripoli","Africa/Tunis","Africa/Windhoek"]},{group:"australia",zones:["Australia/ACT","Australia/Adelaide","Australia/Brisbane","Australia/Broken_Hill","Australia/Canberra","Australia/Currie","Australia/Darwin","Australia/Eucla","Australia/Hobart","Australia/LHI","Australia/Lindeman","Australia/Lord_Howe","Australia/Melbourne","Australia/North","Australia/NSW","Australia/Perth","Australia/Queensland","Australia/South","Australia/Sydney","Australia/Tasmania","Australia/Victoria","Australia/West","Australia/Yancowinna"]},{group:"indian",zones:["Indian/Antananarivo","Indian/Chagos","Indian/Christmas","Indian/Cocos","Indian/Comoro","Indian/Kerguelen","Indian/Mahe","Indian/Maldives","Indian/Mauritius","Indian/Mayotte","Indian/Reunion"]},{group:"atlantic",zones:["Atlantic/Azores","Atlantic/Bermuda","Atlantic/Canary","Atlantic/Cape_Verde","Atlantic/Faeroe","Atlantic/Faroe","Atlantic/Jan_Mayen","Atlantic/Madeira","Atlantic/Reykjavik","Atlantic/South_Georgia","Atlantic/Stanley","Atlantic/St_Helena"]},{group:"pacific",zones:["Pacific/Apia","Pacific/Auckland","Pacific/Chatham","Pacific/Easter","Pacific/Efate","Pacific/Enderbury","Pacific/Fakaofo","Pacific/Fiji","Pacific/Funafuti","Pacific/Galapagos","Pacific/Gambier","Pacific/Guadalcanal","Pacific/Guam","Pacific/Honolulu","Pacific/Johnston","Pacific/Kiritimati","Pacific/Kosrae","Pacific/Kwajalein","Pacific/Majuro","Pacific/Marquesas","Pacific/Midway","Pacific/Nauru","Pacific/Niue","Pacific/Norfolk","Pacific/Noumea","Pacific/Pago_Pago","Pacific/Palau","Pacific/Pitcairn","Pacific/Ponape","Pacific/Port_Moresby","Pacific/Rarotonga","Pacific/Saipan","Pacific/Samoa","Pacific/Tahiti","Pacific/Tarawa","Pacific/Tongatapu","Pacific/Truk","Pacific/Wake","Pacific/Wallis","Pacific/Yap"]},{group:"antarctica",zones:["Antarctica/Casey","Antarctica/Davis","Antarctica/DumontDUrville","Antarctica/Macquarie","Antarctica/Mawson","Antarctica/McMurdo","Antarctica/Palmer","Antarctica/Rothera","Antarctica/South_Pole","Antarctica/Syowa","Antarctica/Vostok"]},{group:"arctic",zones:["Arctic/Longyearbyen"]}],da={threshold:.4,keys:["value","name"]},fa=function TimezoneList(e){var t=e.timezoneOptions,a=e.onTimezoneSelect,n=(e.resolveMessageHeight,t.filter(function(e){return!!e.zones.length}));return f.a.createElement("ul",{className:"drift-meeting-timezone-picker__list"},n.map(function(e,t){var n=f.a.createElement("li",{className:"drift-meeting-timezone-picker-group",key:"timezone-option-group-".concat(t)},e.group),i=e.zones.map(function(e,t){return f.a.createElement("li",{className:"drift-meeting-timezone-picker-list-item",key:"timezone-option-".concat(t)},f.a.createElement(S.a,{onClick:function onClick(){return a(e)}},e.name))});return[n].concat(Object(Ct.a)(i))}))},ga=function TimezonePicker(e){var t=e.onBack,a=e.onTimezoneSelect,n=e.resolveMessageHeight,i=Object(A.useTranslation)().t,r=Object(d.useMemo)(function(){return function translateTimeZones(e){return ma.map(function(t){return{group:e(Xt(t.group)),zones:t.zones.map(function(t){return{name:e(Yt(t)),value:t}})}})}(i)},[i]),o=Object(d.useState)(r),s=Object(c.a)(o,2),l=s[0],u=s[1],m=Object($.a)("");return Object(d.useEffect)(function(){if(""!==m.value){var e=r.map(function(e){var t=new ua.a(e.zones,da);return{group:e.group,zones:t.search(m.value)}});u(e)}else u(r)},[m,r]),Object(d.useEffect)(n,[]),f.a.createElement("div",{className:"drift-meeting-timezone-picker"},f.a.createElement("div",{className:"drift-meeting-timezone__header"},f.a.createElement(S.a,{className:"drift-meeting-back-button drift-meeting-timezone-back-button",onClick:t,"aria-label":"back"},f.a.createElement(N.b,null)),f.a.createElement("span",{className:"drift-meeting-timezone__title"},i("meeting.timeZone"))),f.a.createElement("div",{className:"drift-meeting-timezone-picker--container"},f.a.createElement("div",{className:"drift-meeting-timezone-picker-input"},f.a.createElement(N.n,{width:10,height:10}),f.a.createElement("input",Object.assign({type:"text",placeholder:i("meeting.timeZoneSearchPlaceholder")},m))),f.a.createElement(fa,{timezoneOptions:l,onTimezoneSelect:a})))},ba=function MeetingScheduler(e){var t=e.messageId,a=e.resolveMessageHeight,n=e.isScheduled,o=void 0!==n&&n,s=Object(A.useTranslation)(),u=s.t,m=s.i18n,b=Object(d.useState)(),p=Object(c.a)(b,2),v=p[0],h=p[1],j=Object(d.useState)([]),O=Object(c.a)(j,2),E=O[0],y=O[1],w=Object(d.useState)(!1),k=Object(c.a)(w,2),C=k[0],M=k[1],N=Object(d.useState)(null),S=Object(c.a)(N,2),T=S[0],I=S[1],R=Object(d.useState)(null),z=Object(c.a)(R,2),x=z[0],B=z[1],D=Object(d.useState)(null),L=Object(c.a)(D,2),H=L[0],F=L[1],G=Object(d.useState)(o),U=Object(c.a)(G,2),W=U[0],K=U[1],V=Object(d.useState)(!1),Z=Object(c.a)(V,2),q=Z[0],Q=Z[1],J=Object(d.useState)(!1),X=Object(c.a)(J,2),Y=X[0],$=X[1],te=Object(d.useState)(!1),ae=Object(c.a)(te,2),ie=ae[0],re=ae[1],ce=Object(d.useState)(!1),oe=Object(c.a)(ce,2),se=oe[0],le=oe[1],ue=Object(g.c)(function(e){return e.conversations}).activeConversation,me=Wt(t),de=ne(me.meetingRecipientAgentId),fe=Object(g.b)(),ge=Object(d.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=Object(l.a)([],["slots"],e);return a.reduce(function(e,a){var n;try{n=Object(Ae.a)(a,t.value)}catch(r){Object(ee.j)({data:["Unable to translate non-IANA timezone",r,t.value]}),n=Object(Ae.a)(a,"America/New_York")}var i=n.format("{iso-month}_{date}_{year}");return e[i]?e[i].slots.push(a):e[i]=function createMeetingSlot(e,t,a){return{day:t.format("{day}"),date:t.format("{month} {".concat("en"===m.lang?"date-ordinal":"date","}, {year}")),slots:[a]}}(0,n,a),e},{})},[m]),be=Object(d.useCallback)(Object(r.a)(i.a.mark(function _callee(){var e,t,a;return i.a.wrap(function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,Q(!0),n.next=4,Zt({agentId:me.meetingRecipientAgentId,additionalAgents:me.additionalAgents});case 4:e=n.sent,t=e.data,h(t),I({name:u(Yt(t.agentTimezone)),value:t.agentTimezone}),Q(!1),n.next=17;break;case 11:n.prev=11,n.t0=n.catch(0),a=Object(l.a)({},["response","data"],n.t0),re(!0),le(Jt(a)),Q(!1);case 17:case"end":return n.stop()}},_callee,null,[[0,11]])})),[me.additionalAgents,me.meetingRecipientAgentId,u]);Object(d.useEffect)(function(){if(v&&T){var e=ge(v,T),t=Object(ee.b)(3,e);y(t)}},[T,v,ge]),Object(d.useEffect)(function(){be()},[be]);var pe=function sendMeetingMessage(e){var t={id:e.id,url:e.url,availabilitySlot:H,slotDuration:v.slotDuration,agentId:me.meetingRecipientAgentId,bookingAgentId:me.schedulingAgentId,convesationId:ue,endUserTimezone:T.value,agentTimezone:v.agentTimezone};fe(Object(_.j)({message:Object(P.a)({activeConversation:ue,message:"",attributes:{scheduleMeetingFlow:!0,meetingType:me.meetingType,scheduleMeetingWith:me.meetingRecipientAgentId,widgetGuid:Object(ee.m)(),appointmentInfo:t},isMetaMessage:!0})}))},ve=function(){var e=Object(r.a)(i.a.mark(function _callee2(){var e,t;return i.a.wrap(function _callee2$(a){for(;;)switch(a.prev=a.next){case 0:return $(!0),a.prev=1,a.next=4,qt({endUserTimeZone:T.value,availabilitySlot:H,agentId:me.meetingRecipientAgentId,meetingType:me.meetingType,meetingSource:me.meetingSource,conversationId:ue,bookedByUserId:me.schedulingAgentId});case 4:e=a.sent,Object(_e.h)({agentId:me.meetingRecipientAgentId,meetingTime:H,duration:v.slotDuration,timezone:T.value,conversationId:ue}),K(!0),$(!1),pe(e.data),a.next=18;break;case 11:a.prev=11,a.t0=a.catch(1),t=Object(l.a)({},["response","data"],a.t0),re(!0),$(!1),t&&"Conflict"===t.key&&h(null),le(Jt(t));case 18:case"end":return a.stop()}},_callee2,null,[[1,11]])}));return function bookMeeting(){return e.apply(this,arguments)}}(),he=function onTimezoneLinkClick(){return M(!0)},je=!!x&&!H&&!C,Oe=!x&&!H&&!C,Ee=!!x&&!!H&&!C,ye=q||!E.length,we=function clearMeetingSlot(){return B(null)},ke=function clearMeetingTime(){return F(null)};return Object(d.useEffect)(function(){return function(){}},[fe,t,W]),Object(d.useLayoutEffect)(a,[ye,ie]),ie?f.a.createElement(ra,null,f.a.createElement(ia,{message:u(se,{agent:de}),onRetryClicked:function onMeetingScheduleRetry(){re(!1),we(),ke(),v&&!Oe||be()}})):ye?f.a.createElement(ra,null,f.a.createElement("div",{className:"drift-meeting-card-body"},f.a.createElement(Qt,null))):f.a.createElement(ra,{duration:v.slotDuration},f.a.createElement("div",{className:"drift-meeting-scheduler--meeting-info"},Oe&&f.a.createElement(na,{timezone:T,onMeetingDateChosen:function onMeetingDateChosen(e){B(e)},meetingSlotSets:E,meetingInfo:me,onTimezoneLinkClick:he,resolveMessageHeight:a}),je&&f.a.createElement(sa,{timezone:T,meetingSlot:x,onBackClicked:we,onMeetingTimeChosen:function onMeetingTimeChosen(e){F(e)},onTimezoneLinkClick:he,resolveMessageHeight:a}),Ee&&f.a.createElement(ta,{meetingDuration:v.slotDuration,meetingAgentId:me.meetingRecipientAgentId,additionalAgents:me.additionalAgents,meetingInfo:me,meetingTime:H,timezone:T.name,onBackClicked:ke,onConfirmClicked:ve,isBookingPending:Y,isConfirmed:W,resolveMessageHeight:a}),C&&f.a.createElement(ga,{onTimezoneSelect:function onTimezoneSelected(e){I(e),M(!1)},onBack:function onTimezoneSelectBack(){return M(!1)},resolveMessageHeight:a})))},pa=function MeetingMessage(e){var t=e.attributes,a=e.id,n=(e.conversationId,e.body),i=void 0===n?"":n,r=e.resolveMessageHeight,c=e.nextMessage,o=Object(l.a)(a,["widgetGuid"],t),s=Wt(o),u=s.shouldPresentConfirmationCard,m=s.shouldPresentSchedulingCard,d=s.appointmentInfo,g=s.additionalAgents,b=!!Object(l.a)(null,["attributes","appointmentInfo"],c);return m?f.a.createElement(f.a.Fragment,null,f.a.createElement(It,{body:i}),!b&&f.a.createElement(ba,{messageId:a,resolveMessageHeight:r})):u?f.a.createElement(ra,{duration:d.slotDuration},f.a.createElement("div",{className:"drift-meeting-scheduler--meeting-info"},f.a.createElement(ta,{meetingDuration:d.slotDuration,meetingTime:d.availabilitySlot,meetingAgentId:d.agentId,additionalAgents:g,timezone:d.agentTimeZone,resolveMessageHeight:r,isConfirmed:!0}))):null},va={STRING:zt,HTML:It,LEGACY:It},ha=(a("Qp3a"),a("ggb3")),ja=function FileAttachmentMessage(e){var t=e.attachment,a=void 0===t?{}:t,n=Object(T.a)().inlineFileStyles;return a.fileName?f.a.createElement(f.a.Fragment,null,f.a.createElement(S.a,{className:"drift-widget-message--file",style:n,onClick:function onClick(){return function downloadFile(e){var t=document.createElement("a");t.style.display="none",t.href=e.publicUrl,t.download=e.fileName,t.click()}(a)},"aria-label":"download file"},f.a.createElement(N.l,{width:16,height:16}),f.a.createElement("span",{className:"drift-widget-attachment--filename",title:a.fileName},a.fileName))):null},Oa=function ImageAttachmentMessage(e){var t=e.attachment,a=void 0===t?{}:t,n=e.resolveMessageHeight,i=void 0===n?function(){}:n,r=Object(d.useState)(!1),o=Object(c.a)(r,2),s=o[0],l=o[1];return f.a.createElement(f.a.Fragment,null,f.a.createElement(S.a,{className:"drift-widget-attachment--img","aria-label":"fullscreen file",onClick:function onClick(){return function triggerFullScreen(e){Object(pt.a)({topic:"generate-new-content-box",message:{type:"image",media:e}})}(a.publicUrl)}},f.a.createElement("img",{src:a.publicUrl,alt:a.fileName,onLoad:function onLoad(){!s&&i(),!s&&l(!0)}})))},Aa=function AttachmentMessage(e){var t=e.attachmentIds,a=void 0===t?[]:t,n=e.style,c=e.resolveMessageHeight,o=Object(g.b)(),l=Object(g.c)(function(e){return e.conversations.attachments}),u=ha.CancelToken.source();Object(d.useEffect)(function(){var e=a.filter(function(e){return!l[e]}),t=function(){var t=Object(r.a)(i.a.mark(function _callee(){var t,a;return i.a.wrap(function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,M(e,u.token);case 3:t=n.sent,a=t.data,o(Object(_.c)({attachments:a})),n.next=10;break;case 8:n.prev=8,n.t0=n.catch(0);case 10:case"end":return n.stop()}},_callee,null,[[0,8]])}));return function fetchAttachmentsForMessage(){return t.apply(this,arguments)}}();return e.length&&t(),function(){u.cancel()}},[l,a,u,o]);var m=Object(d.useMemo)(function(){return a&&a.map(function(e){return l[e]?function isImage(e){var t=e.mimeType;return/image/.test(t)&&"image/svg+xml"!==t}(l[e])?f.a.createElement(Oa,{attachment:l[e],key:"drift-widget-attachment--".concat(e),resolveMessageHeight:c}):f.a.createElement(ja,{attachment:l[e],key:"drift-widget-attachment--".concat(e)}):null})},[a,l,c]);return f.a.createElement("div",{style:n,className:s()("drift-widget-attachment drift-widget-message--box",{"drift-widget-attachment--multi":a&&a.length>1})},m)},Ea=(a("mQ2C"),function UnfurlMessage(e){var t=e.html,a=e.meta,n=void 0===a?{}:a,i=e.style,r=void 0===i?{}:i,c=e.resolveMessageHeight,o=void 0===c?function(){}:c;Object(d.useLayoutEffect)(function(){o()},[o,t]);var l=Object(d.useMemo)(function(){return!!n.title||!!n.description||!!n.site},[n]);return f.a.createElement("div",{className:s()("drift-widget-message--box drift-widget-message--unfurl-container"),style:r},f.a.createElement("div",{className:"drift-widget-message--unfurl_data",dangerouslySetInnerHTML:{__html:t}}),l&&f.a.createElement("div",{className:"drift-widget-message--unfurl_meta"},n.title&&f.a.createElement("h3",{className:"drift-widget-message--unfurl_title"},f.a.createElement("a",{rel:"noopener noreferrer",target:"_blank",href:n.canonical,title:n.title},n.title)),n.description&&f.a.createElement("p",{className:"drift-widget-message--unfurl_description"},n.description),n.site&&f.a.createElement("p",{className:"drift-widget-message--unfurl_site"},n.site)))}),ya=function MessageSentTimestamp(e){var t=e.sender,a=e.deliveredAt;return f.a.createElement("span",{className:"drift-widget-message-timestamp drift-widget-message-timestamp--".concat(t)},Object(Ae.a)(a).unixFmt("h:mm a"))},wa=function Message(e){var t=e.message,a=e.nextMessage,n=e.isLastGroup,i=e.isLastMessage,r=e.resolveMessageHeight,o=Object(d.useState)([]),u=Object(c.a)(o,2),m=u[0],b=u[1],p=Object(d.useState)(null),v=Object(c.a)(p,2),h=v[0],j=v[1],O=Object(g.b)(),A=Object(g.c)(function(e){return Object(l.a)({},["conversations","conversations",t.conversationId,"lastMessage"],e)}),E=Object(g.c)(function(e){return Object(l.a)(!1,["embed","configuration","theme","showUnfurl"],e)}),w=Object(T.a)(),C=w.backgroundStyles,M=w.borderStyles,N=function resolveMessageComponent(e){var t=e.attributes,a=t.isBot,n=void 0!==a&&a;return t.show_email_capture_card?Gt:Object(Pe.f)(e)?pa:n?Rt:va.HTML}(t),P=Object(Pe.e)(t)?St.c.END_USER:St.c.AGENT;Object(d.useEffect)(function(){if(A.id===t.id){var e=Object(ee.h)(t.body)?[]:Object(Ct.a)(Object(Tt.a)(t.body));e.length&&b(e)}},[A,t]),Object(d.useEffect)(function(){if(m.length>0){var e=document.createElement("textarea");e.innerHTML=m[0],function getPreviewCard(e){return k.i.get("/",{params:{url:e,iframe:1,omit_script:1,media:1}})}(e.value.replace("#61;","")).then(function(e){var t=e.data;t.html&&j(t)}).catch(function(e){return Object(ee.j)({data:["Failed to unfurl url: ".concat(m[0])]})})}},[m]),Object(d.useLayoutEffect)(function(){r()},[r,n]);var I=Object(l.a)(null,["createdAt"])(t),R=Object(l.a)(null,["attributes","generatedAt"])(t),z=!I&&Ae.a.now().isAfter(Object(Ae.a)(R).add(30,"seconds")),x=!I&&z,B=!!t.body||!!t.attributes.appointmentInfo||"EMAIL_CAPTURE_CARD"===t.type;return f.a.createElement(f.a.Fragment,null,B&&f.a.createElement("li",{className:s()("drift-widget-message drift-widget-message-sender--".concat(P),{"drift-widget-message-failed":x})},f.a.createElement(N,Object.assign({},t,{nextMessage:a,resolveMessageHeight:r,sender:"END_USER",style:P===St.c.END_USER?Object(y.a)({},C):{}})),I&&f.a.createElement(ya,{sender:P,deliveredAt:I}),x&&f.a.createElement(S.a,{onClick:function doSendMessage(){O(Object(_.j)({message:Object(y.a)({},t,{attributes:Object(y.a)({},t.attributes,{generatedAt:(new Date).valueOf()})})}))}},f.a.createElement(Mt,{height:12,width:12}))),E&&h&&f.a.createElement("li",{className:"drift-widget-message drift-widget-message--unfurl drift-widget-message-sender--".concat(P)},f.a.createElement(Ea,{html:h.html,meta:h.meta,resolveMessageHeight:r,style:P===St.c.END_USER?Object(y.a)({},M):{}})),t.attachments&&t.attachments.length>0&&f.a.createElement("li",{className:"drift-widget-message drift-widget-message-sender--".concat(P)},f.a.createElement(Aa,{attachmentIds:t.attachments,resolveMessageHeight:r,style:P===St.c.END_USER?Object(y.a)({},C):{}}),f.a.createElement(ya,{sender:P,deliveredAt:I})),f.a.createElement(Nt,{message:t,isLastGroup:n,isLastMessage:i,delivered:I,generated:R,messageTimedOut:z,deliveryFailed:x,resolveMessageHeight:r}))},ka=function getAvatarPositionClassName(e){var t=Object(Pe.f)(e),a=e.attributes.show_email_capture_card;return"message-group-avatar-".concat(void 0!==a&&a||t?"top":"bottom")},Ca=function MessageGroupHeader(e){var t=e.senderType,a=e.senderId,n=ne(a);return t!==St.c.AGENT?null:f.a.createElement("li",{className:"drift-widget-message-sender"},f.a.createElement("span",{className:"drift-widget-message--meta-author"},n))},Ma=function MessageGroup(e){var t=e.messages,a=void 0===t?[]:t,n=e.isLastGroup,i=void 0!==n&&n,r=e.showTimestamp,o=void 0!==r&&r,l=e.role,u=void 0===l?"cell":l,m=e.resolveMessageHeight,b=void 0===m?function(){}:m,p=Object(A.useTranslation)().t,v=Object(g.c)(function(e){return e.embed.configuration.team});Object(d.useLayoutEffect)(function(){b()},[b,i,o]);var h=Object(c.a)(a,1)[0],j=Object(Pe.e)(h)?St.c.END_USER:St.c.AGENT,O=h.authorId,E=a[a.length-1];return f.a.createElement("div",{role:u,className:s()("drift-widget-message-group-wrapper",{"drift-widget-message-group-wrapper--last":i})},o&&f.a.createElement("p",{className:"drift-widget-message-group-timestamp"},function formatTimestamp(e,t){return e>0?Object(Ae.a)(e).isSame(Ae.a.now(),"date")?"".concat(t("dt.today")," ").concat(Object(Ae.a)(e).unixFmt("h:mm a")):Object(Ae.a)(e).unixFmt("M/d/yyyy h:mm a"):""}(a[0].createdAt,p)),f.a.createElement("ul",{className:"drift-widget-message-group drift-widget-message-group-type--".concat(j)},f.a.createElement(Ca,{senderType:j,senderId:O}),a.map(function(e,t){var n=t===a.length-1,r=n?null:a[t+1];return f.a.createElement(d.Fragment,{key:e.attributes.generatedAt||e.id||e.attributes.widgetGuid},n&&j===St.c.AGENT&&f.a.createElement("li",{className:s()("drift-widget-message-group-avatar",ka(e))},f.a.createElement(ye.a,{id:O,size:"SMALL"})),f.a.createElement(wa,{resolveMessageHeight:b,message:e,nextMessage:r,agents:v,isLastMessage:n,isLastGroup:i}))})),f.a.createElement(kt,{resolveMessageHeight:b,message:E}))},Na=function useScroll(e,t){var a=Object(d.useRef)(),n=Object(d.useMemo)(function(){return Object(E.throttle)(250,function(e){a.current&&a.current(e)})},[a]);Object(d.useEffect)(function(){a.current=e},[e]),Object(d.useEffect)(function(){var e=t.current;if(e)return e.addEventListener("scroll",n),function(){e&&e.removeEventListener("scroll",n)}},[t,n])},Sa=(a("P6Di"),function shouldShowTimestamp(e,t){if(!e)return!0;var a=e?e[e.length-1].createdAt:0;return Object(Ae.a)(t[0].createdAt).isAfter(Object(Ae.a)(a).add(2,"hours"))}),Ta=function setScrollTop(e,t,a){if(e.scrollTop!==t){var n=e.style;a&&(n["-webkit-overflow-scrolling"]="auto",n.overflow="hidden"),e.scrollTop=t,a&&(n.overflow="scroll",n["-webkit-overflow-scrolling"]="touch")}},_a=function MessageGroupList(e){var t=e.reflowHidden,a=e.messageGroups,n=(e.messages,e.fetchMessages),o=e.activeConversation,u=Object(T.a)().widgetBackgroundStyles,m=Object(g.c)(function(e){return e.view.chatOpen}),b=Object(g.c)(function(e){return Object(l.a)({},["conversations","conversations",o],e)}),p=b.hasMoreMessages,v=b.nextPageMessageId,h=te(),j=Object(d.useState)(!0),O=Object(c.a)(j,2),A=O[0],E=O[1],y=Object(d.useState)(!1),w=Object(c.a)(y,2),k=w[0],C=w[1],M=Object(d.useState)(!1),N=Object(c.a)(M,2),S=N[0],_=N[1],P=Object(d.useState)(!1),I=Object(c.a)(P,2),R=I[0],z=I[1],x=Object(d.useRef)(null),B=Object(d.useRef)(0),D=Object(d.useRef)(!1),L=Object(g.b)(),H=Object(oe.a)().markAsRead,F=Object(d.useMemo)(function(){var e=Object(Se.a)(a);return e?Object(Se.a)(e):void 0},[a]),G=De(F),U=!!G&&F!==G,W=a.length,K=!k&&p&&m,V=Object(d.useMemo)(function(){return a.map(function(e,t){var n=t===a.length-1,i=t>0?a[t-1]:null,r=e[0].attributes.widgetGuid||e[0].id;return f.a.createElement(Ma,{key:"messageGroup-".concat(r),role:"listitem",messages:e,isLastGroup:n,showTimestamp:Sa(i,e)})})},[a]),Z=Object(d.useCallback)(function(){var e=Object(r.a)(i.a.mark(function _callee(e){return i.a.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return C(!0),_(!0),t.next=4,n({from:e});case 4:z(!0),C(!1),Object(ee.d)(function(){return _(!1)},1e3);case 7:case"end":return t.stop()}},_callee)}));return function(t){return e.apply(this,arguments)}}(),[n]),q=Object(d.useCallback)(function(e){e.target.scrollTop<=200&&K&&!R&&Z(v)},[Z,v,K,R]);Na(q,x),Object(d.useLayoutEffect)(function(){if(!(W<1))if(!m||k||t)!m&&U&&(D.current=!0);else{var e=Object(l.a)(0,["current","scrollHeight"],x),a=B.current,n=U||A||D.current;x.current&&(n?(Ta(x.current,e,h),D.current=!1):R&&Ta(x.current,e-a,h)),(n||R)&&(B.current=e),E(!1),z(!1)}},[W,m,A,k,U,R,t,h]),Object(d.useEffect)(function(){z(!1),E(!0)},[o]),Object(d.useEffect)(function(){F&&m&&"Read"!==F.viewerRecipientStatus&&!Object(Pe.e)(F)&&H(o)},[F,o,H,m]),Object(d.useEffect)(function(){F&&Object(l.a)(!1,["attributes","isButtonOnly"],F)&&L(Object(we.b)({enabled:!1}))},[F,L]);return f.a.createElement("div",{className:"drift-widget-message-group-list-container"},f.a.createElement("div",{style:u,className:s()("drift-widget-message-group-list-loader",{"drift-widget-message-group-list-loader--loading":S})},f.a.createElement(wt.a,{visible:S})),f.a.createElement(yt.Scrollbars,{ref:function setScrollContainerRef(e){e&&x&&(x.current=e.view)},renderView:function renderScrollbarsView(e){var a=Object(Et.a)(["WebkitOverflowScrolling"],e.style);return f.a.createElement("div",Object.assign({},e,{role:"list",style:a,className:s()("drift-widget-message-group-list",{"drift-widget-message-group-list--hidden":t})}))}},V))},Pa=null,Ia=function ChatLayout(){var e=Object(g.b)(),t=Object(d.useState)(!0),a=Object(c.a)(t,2),n=a[0],o=a[1],v=Object(d.useState)(!1),h=Object(c.a)(v,2),j=h[0],O=h[1],A=Object(d.useState)(!1),E=Object(c.a)(A,2),y=E[0],w=E[1],k=Object(g.c)(function(e){return e.view.chatOpen}),C=Object(g.c)(function(e){return e.embed}),M=Object(g.c)(function(e){return e.conversations.activeConversation}),N=De(M),S=Object(g.c)(function(e){return e.conversations.conversations}),P=Object(g.c)(function(e){return e.conversations.messages}),I=Object(g.c)(function(e){return Object(l.a)({},["conversations","messages",e.conversations.activeConversation],e)}),R=Object(d.useMemo)(function(){return Object(u.a)(I)},[I]),z=Object(d.useMemo)(function(){return Object(l.a)(null,["id"],Object(m.a)(R))},[R]),x=Object(g.c)(function(e){return e.campaigns.activeCampaign}),B=Object(l.a)(void 0,["id"],x),D=Object(g.c)(function(e){return e.session.gdpr}).hasConsent,L=Object(T.a)().widgetBackgroundStyles,H=Object(d.useCallback)(function(){var t=Object(r.a)(i.a.mark(function _callee(t){var a,n,r,c,o,s;return i.a.wrap(function _callee$(i){for(;;)switch(i.prev=i.next){case 0:if(a=t.limit,n=void 0===a?30:a,r=t.from,c=void 0===r?null:r,M&&"NEW"!==M){i.next=3;break}return i.abrupt("return");case 3:return i.prev=3,i.next=6,Object(p.a)({conversationId:M,limit:n,from:c});case 6:return o=i.sent,s=o.data,e(Object(_.g)({messages:s.data,hasMoreMessages:Object(l.a)(!1,["pagination","more"],s),nextPageMessageId:Object(l.a)(null,["pagination","next"],s),conversationId:M})),i.abrupt("return",s);case 12:i.prev=12,i.t0=i.catch(3),Object(ee.e)("Failed to fetch messages",i.t0);case 15:case"end":return i.stop()}},_callee,null,[[3,12]])}));return function(e){return t.apply(this,arguments)}}(),[M,e]);Object(d.useEffect)(function(){y||(Object(Ot.a)(C),Object(Ot.b)(C),w(!0))},[C,y]),Object(d.useEffect)(function(){(function(){var t=Object(r.a)(i.a.mark(function _callee2(){var t,a,n,r,c;return i.a.wrap(function _callee2$(i){for(;;)switch(i.prev=i.next){case 0:if(t=!M||"NEW"===M,a=N===M,n=!!S[M]&&!!P[M],!(t||a||n)){i.next=5;break}return i.abrupt("return");case 5:return i.prev=5,i.next=8,Object(b.d)(M);case 8:r=i.sent,c=r.data,e(Object(_.d)({conversation:c})),H({}),i.next=17;break;case 14:i.prev=14,i.t0=i.catch(5),Object(ee.e)("Failed to fetch messages or active conversation",i.t0);case 17:case"end":return i.stop()}},_callee2,null,[[5,14]])}));return function fetchInfoForActiveConversation(){return t.apply(this,arguments)}})()()},[M,e,H,N,S,P]),Object(d.useEffect)(function(){k?(Pa&&clearTimeout(Pa),o(!1)):Pa=setTimeout(function delaySetReflowHidden(){o(!0)},300)},[k]),Object(d.useEffect)(function(){if(x){var e=!!Object(l.a)(null,["attributes","cta"],x),t="CHAT_RESPONSE"!==Object(l.a)(null,["attributes","cta","CtaType"],x);e&&t&&O(!0)}else O(!1)},[x,e]),Object(d.useEffect)(function(){Object(At.b)("WIDGET_CHAT_FRAME.start")},[]),Object(Fe.a)(B,z,k);var F=Object(d.useMemo)(function(){return Object(Pe.b)(R)},[R]),G=Object(d.useMemo)(function(){return f.a.createElement(_a,{activeConversation:M,messageGroups:F,messages:I,fetchMessages:H,reflowHidden:n})},[I,F,H,M,n]),U=He();return f.a.createElement("main",{className:"drift-widget-chat-layout",role:"main","aria-label":"drift-chat-main"},f.a.createElement("div",{className:s()("drift-widget-chat-wrapper",{"drift-widget-chat-wrapper__open":k,"drift-widget-chat-wrapper__closed":!k,"drift-widget-chat-wrapper__reflow-hidden":n,"drift-widget-chat-wrapper__active-conversation":!!M&&D})},f.a.createElement(ht,{activeConversation:M,chatHidden:n}),f.a.createElement(ze,null),M&&D&&f.a.createElement("div",{className:s()("drift-widget-message-history",{"drift-widget-message-history--with-footer":U}),style:L},G),f.a.createElement("div",null,!j&&D&&f.a.createElement(Oe,{onSubmit:function doSendMessage(t){e(Object(_.j)(t))},activeConversationId:M}),f.a.createElement(Be,null))))};t.default=function(e){var t=Object(d.useState)(!1),a=Object(c.a)(t,2),n=a[0],o=a[1],s=Object(g.c)(function(e){return e.view.initComplete}),u=Object(g.c)(function(e){return Object(l.a)("en",["embed","configuration","locale"],e)});return Object(d.useEffect)(function(){s&&!n&&function(){var e=Object(r.a)(i.a.mark(function _callee3(){return i.a.wrap(function _callee3$(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(jt.a)(u);case 2:o(!0);case 3:case"end":return e.stop()}},_callee3)}));return function runAsync(){return e.apply(this,arguments)}}()()},[s,n,u]),s&&n?f.a.createElement(Ia,e):f.a.createElement(v.a,null)}},"2VrW":function(e,t,a){},"7rSy":function(e,t,a){"use strict";var n=a("mj2O"),i=a.n(n),r=a("7SM1"),c=(a("MWt3"),a("ERkP")),o=a.n(c),s=a("3B44"),l=a("P6UB");t.a=function CtaButton(e){var t=e.ctaUrl,a=e.ctaCopy,n=e.ctaType,c=e.onClick,u=e.campaignMessage,m=Object(s.a)().backgroundStyles,d=function(){var e=Object(r.a)(i.a.mark(function _callee(e){return i.a.wrap(function _callee$(t){for(;;)switch(t.prev=t.next){case 0:"CHAT_RESPONSE"===n?Object(l.a)({topic:"drift-api:open-chat"}):"SCHEDULE_MEETING"===n&&Object(l.a)({topic:"drift-api:schedule-meeting",message:{scheduleMeetingWith:u&&u.attributes.senderId,options:{campaignMessage:u}}}),c&&c(e);case 2:case"end":return t.stop()}},_callee)}));return function onCtaClick(t){return e.apply(this,arguments)}}();return"LINK_TO_URL"===n?o.a.createElement("div",{className:"drift-widget-announcement-cta drift-widget-announcement-cta-link-wrapper",style:m},o.a.createElement("a",{className:"drift-widget-announcement-cta-link",href:t,onClick:d,target:"_blank",rel:"noopener noreferrer"},a)):o.a.createElement("button",{className:"drift-widget-announcement-cta",onClick:d,style:m},a)}},"86gp":function(e,t,a){},"97O6":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAAAWCAYAAACFbNPBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABa9JREFUeNrsWy1z40gQla8EDAwEDAQCDAIMAgwCDA0XBgYGBu5PyM84aLgw8KDBAoMDBgsEAgQEBAQEBARclZ2uepPrne2WRrbls7PqKpWc0UxPz0y//pIyen9/Dwa6LhqNRjNzmwmPcnOl5kzrYZdOQ+GwBVcDirG5LXGNG7rWpu/O3DcuUEz7ytxW7gDT76WtjzYXAdJcW8MjFWR+EoBMAF4ra3wRmmkdG/Psq/kdac8Vfg/mtpAMiRnzt88C/xpU7yrAEZvbMxR33NLdAukZ4/okmmturicz1yNA3Be9Ku0rM2+keNlFR14DQK4UHE+K9Wwi6v94RlHnfc4HD5Uojx8826zHyQeAfJ6w6tHDa2jhz7czizwzMi969iK1Mu/cCRMjJbTa9JKDSG7M0N5MWDn9iOeUHWpl+hTs2UQZF6HvnrVNIGMFfpq8ltdEUhQeiyvr+FgLm1Pl0WVvWtb8sT6+bkZL5aBJli1ZVLKGmN+GFDM8X3exlB6UCh4qUmTe9eRFKL96VTzVF/MshZ6sjg2tDknSF4pyECoTduALl69pr3CYpDB3aP7OnhOgqP3NXBkbeocFU9/bhjBj1yJjwpRFs3Al+IjzGB6Z4fHWdW+wJlpHaP7eWqBBqRdQ5n8VvksFHL8ov/ltZd8ZvkskwvmJlXMteLdnYa96zXtI1wCEmQDYZSBX9zqHVodWsSocuCVSphiKUDNFIcAU4B9D6DkUocCYqfUs8Dh2czN2AHQVZF3N3y4YXLms98hx2fXRvHMzvmBWmvf5sPgK6EiGG7pIhgaQuDxv2XoSgGTO+N7avZK8B5JMKbT6p+mgzbPtOWIpWPNdh4rXqUOtZ2F/NFnSrqHVoQDZw1rZQ3wDKCLwCq3bZ0qXQtljeIoMijMFWDhAJtQXVta2Fc7BlIq15uEQlzEDQCfwEr/1URSAP6cw5h4gyZRwy503tyAgQ0AApTUh6R5DnqxBDs0SJk6s3aagaln1RFWsQ/KUlyPBWRoepPBfPHOx10PnOvY9CB8/gfC5Yl1JMSZQlg8AADQhlDdCuwXR3uUHyypVODSaCB4iEviULaDJ4AHGSqIYO7lIBABUTLGXAE0Y/PcOoQvll/ISsKGMehb5yFMiMZ+1dN20GcNTAmTMFCtk8WbeUoasBcDMAI4pU6B7KFoBxc49LWuqKKpNgksnQZYSzJR5GNF7dtiniAExpBAKYaINtYh+KIl50GEfzwkIX6ufnDnU+triPY8KOTsDxFHQGiEVxaN7mzsIVi5ylCwHHwuQCjwKgO5GCq9gOXxjSQuOTLDUaYvXkWjqYd1TVqy4gww3dn54z0AArC/FweXT9lwTsVBrderQ6lCA0MFqJbwCSnSLqpEFTMhAVbAEr2IHnrHnFiA1S+K7hiEpqxJFx26S4XUDuWpPd73HAR3zZrlWPHjMwk4C3sYzUT2LRfeoFNVKZBB4hEsSSDbIxX6rbB4TWp0qB+GC2no8KdK9+V2Cv03g3Y/obEzPgWPzk7HkPaCsUtz7pliXBHMsqOLCQppYeHdR8QoVm8d6Ihr7o8m6C6Fd0BK2NSbXSjslpmuWe6XO/vwfAClRXUs8Ddj6yDDubOFo2HETqhaQJCwBj9m4TPAGBZ6VTiyeYbxrZdpCkj341Q5oQyZP5qGwlfB3hTXUDXvjjtkrVarSYy1W9lLwgJS7PZjnr4KC9fktVKq05Z7AuEryBkhDaCVVlFKPfqRAO6E9C359WWjb3zymb+XXtg7PeQ7am659ET5J3xQtUCxJmEGImUfuI95fB38gDZ+7XzARmPBmPFYqZctLrnx9Bho+Vrx8WjcktT7g2AxbOADkM3uRGiDpGucTqE79weIQYg10sSD5xt5ezwL9K1/K/xIl1yk98kOfPl1A6tPWVAjwqQIeOq6VRsP/pF8vOZ/L5MP/ovewxwNABhpIp58CDAChjQWETVMlnAAAAABJRU5ErkJggg=="},"9Hpm":function(e,t,a){},E8iA:function(e,t,a){"use strict";var n=a("LVcX"),i=a("uDfI"),r=function activeCampaignSelector(e){return Object(n.a)({},["campaigns","activeCampaign"],e)};t.a=function useActiveCampaign(){return Object(i.c)(r)}},I4Wp:function(e,t,a){},IuzP:function(e,t,a){},JhcM:function(e,t,a){},Jwn2:function(e,t,a){},MWt3:function(e,t,a){},P6Di:function(e,t,a){},"PGb/":function(e,t,a){},Q0X4:function(e,t,a){},Q80r:function(e,t,a){},Qp3a:function(e,t,a){},RJSH:function(e,t,a){},SwvN:function(e,t,a){},Uo75:function(e,t,a){},UwV1:function(e,t,a){},WkOX:function(e,t,a){"use strict";var n=a("s8DI"),i=a("ERkP");t.a=function useInputValue(e){var t=Object(i.useState)(e),a=Object(n.a)(t,2),r=a[0],c=a[1];return{value:r,onChange:Object(i.useCallback)(function(e){c(e.currentTarget.value)},[])}}},Wkzb:function(e,t,a){},ZP32:function(e,t,a){},efpO:function(e,t,a){"use strict";a.d(t,"a",function(){return u});var n=a("mj2O"),i=a.n(n),r=a("jm9a"),c=a("7SM1"),o=a("A5mO"),s=function updateSpacetimeI18n(e){var t=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],a=["january","february","march","april","may","june","july","august","september","october","november","december"];Object(o.a)().i18n({days:{long:t.map(function(t){return e.t("dt.day.".concat(t))}),short:t.map(function(t){return e.t("dt.short.day.".concat(t))})},months:{long:a.map(function(t){return e.t("dt.month.".concat(t))}),short:a.map(function(t){return e.t("dt.short.month.".concat(t))})}})},l=function importByLocale(){switch(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en"){case"da":return a.e(19).then(a.t.bind(null,"NlHF",3));case"de":return a.e(20).then(a.t.bind(null,"xciK",3));case"es":return a.e(22).then(a.t.bind(null,"E4Qo",3));case"et":return a.e(23).then(a.t.bind(null,"LfcA",3));case"fi":return a.e(24).then(a.t.bind(null,"hxpe",3));case"fr":return a.e(25).then(a.t.bind(null,"4odN",3));case"hi":return a.e(26).then(a.t.bind(null,"/VOv",3));case"hr":return a.e(27).then(a.t.bind(null,"nuYs",3));case"hu":return a.e(28).then(a.t.bind(null,"vvtZ",3));case"is":return a.e(29).then(a.t.bind(null,"lGT2",3));case"it":return a.e(30).then(a.t.bind(null,"JzFs",3));case"ja":return a.e(31).then(a.t.bind(null,"N6oZ",3));case"ko":return a.e(32).then(a.t.bind(null,"EA3l",3));case"nb":return a.e(33).then(a.t.bind(null,"/p8F",3));case"nl":return a.e(34).then(a.t.bind(null,"xW0c",3));case"pl":return a.e(35).then(a.t.bind(null,"lWhz",3));case"pt":return a.e(37).then(a.t.bind(null,"2nBd",3));case"pt-BR":return a.e(36).then(a.t.bind(null,"+94T",3));case"ro":return a.e(38).then(a.t.bind(null,"tDBS",3));case"ru":return a.e(39).then(a.t.bind(null,"wywo",3));case"sl":return a.e(40).then(a.t.bind(null,"1oMb",3));case"sv":return a.e(41).then(a.t.bind(null,"tBPe",3));case"th":return a.e(42).then(a.t.bind(null,"Uso0",3));case"tr":return a.e(43).then(a.t.bind(null,"Fagm",3));case"vi":return a.e(44).then(a.t.bind(null,"FBrj",3));case"zh":return a.e(46).then(a.t.bind(null,"JB1/",3));case"zh-HK":return a.e(45).then(a.t.bind(null,"6wg5",3));default:return a.e(21).then(a.t.bind(null,"A/Ql",3))}},u=function(){var e=Object(c.a)(i.a.mark(function _callee(){var e,t,n,c,o,u,m,d=arguments;return i.a.wrap(function _callee$(i){for(;;)switch(i.prev=i.next){case 0:return e=d.length>0&&void 0!==d[0]?d[0]:"en",t=a("d5gM"),n=t.default,c=a("liE7"),o=c.initReactI18next,i.next=5,l(e);case 5:u=i.sent,m=Object(r.a)({},e,{translation:u}),n.use(o).init({resources:m,lng:e,fallbackLng:e,nsSeparator:!1,interpolation:{escapeValue:!1}}),s(n);case 9:case"end":return i.stop()}},_callee)}));return function initI18n(){return e.apply(this,arguments)}}()},fmuz:function(e,t,a){},mQ2C:function(e,t,a){},"n/d+":function(e,t,a){},oY6K:function(e,t,a){},"p0+K":function(e,t,a){},sXTY:function(e,t,a){},sZBt:function(e,t,a){},txDs:function(e,t,a){}}]);